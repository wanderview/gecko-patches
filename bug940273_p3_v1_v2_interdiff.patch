# HG changeset patch
# Parent 5975ff6e6bb3b9ced015f0b2982b5ef5d775f445
# User Ben Kelly <ben@wanderview.com>
Bug 940273 P3 v1 to v2 interdiff.

diff --git a/dom/webidl/Cache.webidl b/dom/webidl/Cache.webidl
--- a/dom/webidl/Cache.webidl
+++ b/dom/webidl/Cache.webidl
@@ -3,44 +3,43 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this file,
  * You can obtain one at http://mozilla.org/MPL/2.0/.
  *
  * The origin of this IDL file is
  * http://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html
  *
  */
 
+// https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#cache
+
 [Exposed=(Window,Worker),
  Func="mozilla::dom::cache::Cache::PrefEnabled"]
 interface Cache {
-  [Throws]
-  Promise<Response> match(RequestInfo request,
-                          optional CacheQueryOptions options);
-  [Throws]
-  Promise<sequence<Response>> matchAll(optional RequestInfo request,
-                                       optional CacheQueryOptions options);
-  [Throws]
-  Promise<void> add(RequestInfo request);
-  [Throws]
-  Promise<void> addAll(sequence<RequestInfo> requests);
-  [Throws]
-  Promise<void> put(RequestInfo request, Response response);
-  [Throws]
-  Promise<boolean> delete(RequestInfo request, optional CacheQueryOptions options);
-  [Throws]
-  Promise<sequence<Request>> keys(optional RequestInfo request,
-                                  optional CacheQueryOptions options);
+[Throws]
+Promise<Response> match(RequestInfo request, optional CacheQueryOptions options);
+[Throws]
+Promise<sequence<Response>> matchAll(optional RequestInfo request, optional CacheQueryOptions options);
+[Throws]
+Promise<void> add(RequestInfo request);
+[Throws]
+Promise<void> addAll(sequence<RequestInfo> requests);
+[Throws]
+Promise<void> put(RequestInfo request, Response response);
+[Throws]
+Promise<boolean> delete(RequestInfo request, optional CacheQueryOptions options);
+[Throws]
+Promise<sequence<Request>> keys(optional RequestInfo request, optional CacheQueryOptions options);
 };
 
 dictionary CacheQueryOptions {
-  boolean ignoreSearch;
-  boolean ignoreMethod;
-  boolean ignoreVary;
-  boolean prefixMatch;
-  DOMString cacheName;
+boolean ignoreSearch = false;
+boolean ignoreMethod = false;
+boolean ignoreVary = false;
+boolean prefixMatch = false;
+DOMString cacheName;
 };
 
 dictionary CacheBatchOperation {
-  DOMString type;
-  Request request;
-  Response response;
-  CacheQueryOptions options;
+DOMString type;
+Request request;
+Response response;
+CacheQueryOptions options;
 };
diff --git a/dom/webidl/CacheStorage.webidl b/dom/webidl/CacheStorage.webidl
--- a/dom/webidl/CacheStorage.webidl
+++ b/dom/webidl/CacheStorage.webidl
@@ -3,29 +3,24 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this file,
  * You can obtain one at http://mozilla.org/MPL/2.0/.
  *
  * The origin of this IDL file is
  * http://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html
  *
  */
 
+// https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#cache-storage
+
 [Exposed=(Window,Worker),
  Func="mozilla::dom::cache::CacheStorage::PrefEnabled"]
 interface CacheStorage {
-   [Throws]
-   Promise<Response> match(RequestInfo request,
-                           optional CacheQueryOptions options);
-   [Throws]
-   Promise<boolean> has(DOMString cacheName);
-   [Throws]
-   Promise<Cache> open(DOMString cacheName);
-   [Throws]
-   Promise<boolean> delete(DOMString cacheName);
-   [Throws]
-   Promise<sequence<DOMString>> keys();
+[Throws]
+Promise<Response> match(RequestInfo request, optional CacheQueryOptions options);
+[Throws]
+Promise<boolean> has(DOMString cacheName);
+[Throws]
+Promise<Cache> open(DOMString cacheName);
+[Throws]
+Promise<boolean> delete(DOMString cacheName);
+[Throws]
+Promise<sequence<DOMString>> keys();
 };
-
-[NoInterfaceObject, Exposed=(Window,Worker)]
-interface GlobalCaches {
-  [Throws, Func="mozilla::dom::cache::CacheStorage::PrefEnabled"]
-  readonly attribute CacheStorage caches;
-};
