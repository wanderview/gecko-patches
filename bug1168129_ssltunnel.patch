# HG changeset patch
# Parent b6623a27fa647437a630dfc548d684b2a2de22c1
# User Ben Kelly <ben@wanderview.com>
Bug 1168129 Fix ssltunnel.cpp FAIL_ON_WARNING build errors on some platforms. r=ted

diff --git a/testing/mochitest/ssltunnel/ssltunnel.cpp b/testing/mochitest/ssltunnel/ssltunnel.cpp
--- a/testing/mochitest/ssltunnel/ssltunnel.cpp
+++ b/testing/mochitest/ssltunnel/ssltunnel.cpp
@@ -1360,17 +1360,21 @@ int parseConfigFile(const char* filePath
   FILE* f = fopen(filePath, "r");
   if (!f)
     return 1;
 
   char buffer[1024], *b = buffer;
   while (!feof(f))
   {
     char c;
-    fscanf(f, "%c", &c);
+
+    if (fscanf(f, "%c", &c) != 1) {
+      break;
+    }
+
     switch (c)
     {
     case '\n':
       *b++ = 0;
       if (processConfigLine(buffer))
       {
         fclose(f);
         return 1;
