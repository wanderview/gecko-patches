# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  9a4804d9e5322bbc910e833abe999f555993c5db
Bug 1184607 P5 interdiff 001 don't set manual redirect mode for html imports

diff --git a/dom/base/ImportManager.cpp b/dom/base/ImportManager.cpp
--- a/dom/base/ImportManager.cpp
+++ b/dom/base/ImportManager.cpp
@@ -12,17 +12,16 @@
 #include "nsContentUtils.h"
 #include "nsCORSListenerProxy.h"
 #include "nsIChannel.h"
 #include "nsIContentPolicy.h"
 #include "nsIContentSecurityPolicy.h"
 #include "nsIDocument.h"
 #include "nsIDOMDocument.h"
 #include "nsIDOMEvent.h"
-#include "nsIHttpChannelInternal.h"
 #include "nsIPrincipal.h"
 #include "nsIScriptObjectPrincipal.h"
 #include "nsScriptLoader.h"
 #include "nsNetUtil.h"
 
 //-----------------------------------------------------------------------------
 // AutoError
 //-----------------------------------------------------------------------------
@@ -473,21 +472,16 @@ ImportLoader::Open()
                               mURI,
                               mImportParent,
                               nsILoadInfo::SEC_REQUIRE_CORS_DATA_INHERITS,
                               nsIContentPolicy::TYPE_SUBDOCUMENT,
                               loadGroup,
                               nullptr,  // aCallbacks
                               nsIRequest::LOAD_BACKGROUND);
 
-  nsCOMPtr<nsIHttpChannelInternal> httpChannel = do_QueryInterface(channel);
-  if (httpChannel) {
-    httpChannel->SetRedirectMode(nsIHttpChannelInternal::REDIRECT_MODE_MANUAL);
-  }
-
   NS_ENSURE_SUCCESS_VOID(rv);
   rv = channel->AsyncOpen2(this);
   NS_ENSURE_SUCCESS_VOID(rv);
 
   BlockScripts();
   ae.Pass();
 }
 
