# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  f31583479f67a8135d01ba59baa37328b811fb9a
Bug 1256428 P13 Remove unnecessary ServiceWorkerUnregsterJob2 stop. r=jdm

See: https://github.com/slightlyoff/ServiceWorker/issues/855

diff --git a/dom/workers/ServiceWorkerUnregisterJob.cpp b/dom/workers/ServiceWorkerUnregisterJob.cpp
--- a/dom/workers/ServiceWorkerUnregisterJob.cpp
+++ b/dom/workers/ServiceWorkerUnregisterJob.cpp
@@ -66,22 +66,16 @@ ServiceWorkerUnregisterJob2::AsyncExecut
   registration->mPendingUninstall = true;
 
   // "Resolve promise with true"
   mResult = true;
   InvokeResultCallbacks(NS_OK);
 
   // "If no service worker client is using registration..."
   if (!registration->IsControllingDocuments()) {
-    // "If registration's uninstalling flag is set.."
-    if (!registration->mPendingUninstall) {
-      Finish(NS_OK);
-      return;
-    }
-
     // "Invoke [[Clear Registration]]..."
     swm->RemoveRegistration(registration);
   }
 
   Finish(NS_OK);
 }
 
 } // namespace workers
