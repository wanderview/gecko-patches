# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  2df075750251177ffa83eb155750ac76b3b014d6
Bug 1468340 P2 Don't unconditionally set LOAD_BYPASS_SERVICE_WORKER in HttpChannelParent for non-synthesized channels. r=valentin

diff --git a/netwerk/protocol/http/HttpChannelParent.cpp b/netwerk/protocol/http/HttpChannelParent.cpp
--- a/netwerk/protocol/http/HttpChannelParent.cpp
+++ b/netwerk/protocol/http/HttpChannelParent.cpp
@@ -593,21 +593,16 @@ HttpChannelParent::DoAsyncOpen(  const U
     httpChannelImpl->SetCouldBeSynthesized();
 
     if (!aSecurityInfoSerialization.IsEmpty()) {
       nsCOMPtr<nsISupports> secInfo;
       NS_DeserializeObject(aSecurityInfoSerialization, getter_AddRefs(secInfo));
       rv = httpChannel->OverrideSecurityInfo(secInfo);
       MOZ_ASSERT(NS_SUCCEEDED(rv));
     }
-  } else if (!ServiceWorkerParentInterceptEnabled()) {
-    nsLoadFlags newLoadFlags;
-    httpChannel->GetLoadFlags(&newLoadFlags);
-    newLoadFlags |= nsIChannel::LOAD_BYPASS_SERVICE_WORKER;
-    httpChannel->SetLoadFlags(newLoadFlags);
   }
 
   nsCOMPtr<nsICacheInfoChannel> cacheChannel =
     do_QueryInterface(static_cast<nsIChannel*>(httpChannel.get()));
   if (cacheChannel) {
     cacheChannel->SetCacheKey(aCacheKey);
     cacheChannel->PreferAlternativeDataType(aPreferredAlternativeType);
 
