# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  d7232975c930444b386a4a7837acbac339d12807

diff --git a/dom/base/TimeoutManager.cpp b/dom/base/TimeoutManager.cpp
--- a/dom/base/TimeoutManager.cpp
+++ b/dom/base/TimeoutManager.cpp
@@ -598,16 +598,18 @@ TimeoutManager::RunTimeout(const TimeSta
 
   if (mWindow.IsSuspended()) {
     return;
   }
 
   printf_stderr("### ### [%p] TimeoutManager::RunTimeout() safe:%s\n", this,
                 (nsContentUtils::IsSafeToRunScript() ? "true" : "false"));
 
+  MOZ_DIAGNOSTIC_ASSERT(nsContentUtils::IsSafeToRunScript());
+
   NS_ASSERTION(!mWindow.IsFrozen(), "Timeout running on a window in the bfcache!");
 
   // Limit the overall time spent in RunTimeout() to reduce jank.
   uint32_t totalTimeLimitMS = std::max(1u, gMaxConsecutiveCallbacksMilliseconds);
   const TimeDuration totalTimeLimit = TimeDuration::FromMilliseconds(totalTimeLimitMS);
 
   // Allow up to 25% of our total time budget to be used figuring out which
   // timers need to run.  This is the initial loop in this method.
