# HG changeset patch
# Parent 56492f7244a92579eacc3d6a968b8ecdc90085e3
# User Ben Kelly <ben@wanderview.com>
Bug 1140065 Check for null actor before using it in CacheStorageChild::RecvOpenResponse(). r=ehsan


diff --git a/dom/cache/CacheStorageChild.cpp b/dom/cache/CacheStorageChild.cpp
--- a/dom/cache/CacheStorageChild.cpp
+++ b/dom/cache/CacheStorageChild.cpp
@@ -132,17 +132,19 @@ CacheStorageChild::RecvOpenResponse(cons
   }
 
   CacheChild* cacheChild = static_cast<CacheChild*>(aActor);
 
   // Since FeatureNotified() returned false above, we are guaranteed that
   // the feature won't try to shutdown the actor until after we create the
   // Cache DOM object in the listener's RecvOpenResponse() method.  This
   // is important because StartShutdown() expects a Cache object listener.
-  cacheChild->SetFeature(GetFeature());
+  if (cacheChild) {
+    cacheChild->SetFeature(GetFeature());
+  }
 
   listener->RecvOpenResponse(aRequestId, aRv, cacheChild);
   return true;
 }
 
 bool
 CacheStorageChild::RecvDeleteResponse(const RequestId& aRequestId,
                                       const nsresult& aRv,
