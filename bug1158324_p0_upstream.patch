# HG changeset patch
# Parent 039f4c5ad110c92008282962b02f8c09f0374801
# User Ben Kelly <ben@wanderview.com>
Bug 1158324 Fix missed arg in upstream sandboxed-iframes.https.html

diff --git a/testing/web-platform/tests/service-workers/cache-storage/window/sandboxed-iframes.https.html b/testing/web-platform/tests/service-workers/cache-storage/window/sandboxed-iframes.https.html
--- a/testing/web-platform/tests/service-workers/cache-storage/window/sandboxed-iframes.https.html
+++ b/testing/web-platform/tests/service-workers/cache-storage/window/sandboxed-iframes.https.html
@@ -18,17 +18,17 @@ function load_iframe(src, sandbox) {
     });
 }
 
 function wait_for_message(id) {
     return new Promise(function(resolve) {
         self.addEventListener('message', function listener(e) {
             if (e.data.id === id) {
                 resolve(e.data);
-                self.removeEventListener(listener);
+                self.removeEventListener('message', listener);
             }
         });
     });
 }
 
 var counter = 0;
 
 promise_test(function(t) {
