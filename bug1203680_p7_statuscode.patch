# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  b53a542b61fa5119ea0cf2c834ca9b94b12d9d95
Bug 1203680 P7 Fix e10s handling on interceptions resulting in redirect status codes. r=jdm

diff --git a/netwerk/protocol/http/HttpChannelChild.cpp b/netwerk/protocol/http/HttpChannelChild.cpp
--- a/netwerk/protocol/http/HttpChannelChild.cpp
+++ b/netwerk/protocol/http/HttpChannelChild.cpp
@@ -2210,18 +2210,17 @@ HttpChannelChild::OverrideWithSynthesize
   // however, we want to respect the encoding of the final result instead.
   if (!WillRedirect(aResponseHead)) {
     SetApplyConversion(false);
   }
 
   mResponseHead = aResponseHead;
   mSynthesizedResponse = true;
 
-  uint16_t status = mResponseHead->Status();
-  if (status != 200 && status != 404) {
+  if (WillRedirect(mResponseHead)) {
     // Continue with the original cross-process request
     nsresult rv = ContinueAsyncOpen();
     NS_ENSURE_SUCCESS_VOID(rv);
     return;
   }
 
   // In our current implementation, the FetchEvent handler will copy the
   // response stream completely into the pipe backing the input stream so we
