# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  332c66278a256af98e4131947eeba3e8a7c9c877
Bug 1366791 Make browser_ext_geckoProfiler_symbolicate.js wait for prefs to be written. r=mstange

diff --git a/browser/components/extensions/test/browser/browser_ext_geckoProfiler_symbolicate.js b/browser/components/extensions/test/browser/browser_ext_geckoProfiler_symbolicate.js
--- a/browser/components/extensions/test/browser/browser_ext_geckoProfiler_symbolicate.js
+++ b/browser/components/extensions/test/browser/browser_ext_geckoProfiler_symbolicate.js
@@ -32,17 +32,17 @@ let getExtension = () => {
           "id": "profilertest@mozilla.com",
         },
       },
     },
   });
 };
 
 add_task(async function testProfilerControl() {
-  SpecialPowers.pushPrefEnv({
+  await SpecialPowers.pushPrefEnv({
     set: [
       [
         "extensions.geckoProfiler.symbols.url",
         "http://mochi.test:8888/browser/browser/components/extensions/test/browser/profilerSymbols.sjs?path=",
       ],
       [
         "extensions.geckoProfiler.acceptedExtensionIds",
         "profilertest@mozilla.com",
