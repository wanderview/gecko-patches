# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  976962093a1192f854abefc366b4fe9678232992
Bug 1291709 Make PdfjsChromeUtils.jsm use a WeakSet for tracking browsers. r=bdahl

diff --git a/browser/extensions/pdfjs/content/PdfjsChromeUtils.jsm b/browser/extensions/pdfjs/content/PdfjsChromeUtils.jsm
--- a/browser/extensions/pdfjs/content/PdfjsChromeUtils.jsm
+++ b/browser/extensions/pdfjs/content/PdfjsChromeUtils.jsm
@@ -59,17 +59,17 @@ var PdfjsChromeUtils = {
   _ppmm: null,
   _mmg: null,
 
   /*
    * Public API
    */
 
   init: function () {
-    this._browsers = new Set();
+    this._browsers = new WeakSet();
     if (!this._ppmm) {
       // global parent process message manager (PPMM)
       this._ppmm = Cc['@mozilla.org/parentprocessmessagemanager;1'].
         getService(Ci.nsIMessageBroadcaster);
       this._ppmm.addMessageListener('PDFJS:Parent:clearUserPref', this);
       this._ppmm.addMessageListener('PDFJS:Parent:setIntPref', this);
       this._ppmm.addMessageListener('PDFJS:Parent:setBoolPref', this);
       this._ppmm.addMessageListener('PDFJS:Parent:setCharPref', this);
