# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  fbd9178703ec0a477db3d765f2d7361f5280c0d9

diff --git a/dom/serviceworkers/RemoteServiceWorkerRegistrationImpl.cpp b/dom/serviceworkers/RemoteServiceWorkerRegistrationImpl.cpp
--- a/dom/serviceworkers/RemoteServiceWorkerRegistrationImpl.cpp
+++ b/dom/serviceworkers/RemoteServiceWorkerRegistrationImpl.cpp
@@ -150,16 +150,20 @@ void
 RemoteServiceWorkerRegistrationImpl::RevokeActor(ServiceWorkerRegistrationChild* aActor)
 {
   MOZ_DIAGNOSTIC_ASSERT(mActor);
   MOZ_DIAGNOSTIC_ASSERT(mActor == aActor);
   mActor->RevokeOwner(this);
   mActor = nullptr;
 
   mShutdown = true;
+
+  if (mOuter) {
+    mOuter->RegistrationRemoved();
+  }
 }
 
 void
 RemoteServiceWorkerRegistrationImpl::UpdateFound()
 {
   /* TODO
   if (mOuter) {
     mOuter->DispatchTrustedEvent(NS_LITERAL_STRING("updatefound"));
