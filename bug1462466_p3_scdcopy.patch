# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  1e05f60471665a0832deef5572f5058c299537de
Bug 1462466 P3 Fix StructuredCloneData::CopyFromCloneMessageDataForBackgroundParent() to use CopyMemory instead of BorrowMemory. r=baku

diff --git a/dom/ipc/StructuredCloneData.cpp b/dom/ipc/StructuredCloneData.cpp
--- a/dom/ipc/StructuredCloneData.cpp
+++ b/dom/ipc/StructuredCloneData.cpp
@@ -370,17 +370,17 @@ StructuredCloneData::CopyFromClonedMessa
   MOZ_ASSERT(NS_IsMainThread());
   UnpackClonedMessageData<CopyMemory, Child>(aClonedData, *this);
 }
 
 void
 StructuredCloneData::CopyFromClonedMessageDataForBackgroundParent(const ClonedMessageData& aClonedData)
 {
   MOZ_ASSERT(IsOnBackgroundThread());
-  UnpackClonedMessageData<BorrowMemory, Parent>(aClonedData, *this);
+  UnpackClonedMessageData<CopyMemory, Parent>(aClonedData, *this);
 }
 
 void
 StructuredCloneData::CopyFromClonedMessageDataForBackgroundChild(const ClonedMessageData& aClonedData)
 {
   UnpackClonedMessageData<CopyMemory, Child>(aClonedData, *this);
 }
 
