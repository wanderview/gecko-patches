# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  bdea9a8abbe48d5207bdb6fc871d4adf04cdf228
Bug 1462466 P3 Fix StructuredCloneData::CopyFromCloneMessageDataForBackgroundParent() to use CopyMemory instead of BorrowMemory. r=baku

diff --git a/dom/ipc/StructuredCloneData.cpp b/dom/ipc/StructuredCloneData.cpp
--- a/dom/ipc/StructuredCloneData.cpp
+++ b/dom/ipc/StructuredCloneData.cpp
@@ -369,17 +369,17 @@ StructuredCloneData::CopyFromClonedMessa
   MOZ_ASSERT(NS_IsMainThread());
   UnpackClonedMessageData<CopyMemory, Child>(aClonedData, *this);
 }
 
 void
 StructuredCloneData::CopyFromClonedMessageDataForBackgroundParent(const ClonedMessageData& aClonedData)
 {
   MOZ_ASSERT(IsOnBackgroundThread());
-  UnpackClonedMessageData<BorrowMemory, Parent>(aClonedData, *this);
+  UnpackClonedMessageData<CopyMemory, Parent>(aClonedData, *this);
 }
 
 void
 StructuredCloneData::CopyFromClonedMessageDataForBackgroundChild(const ClonedMessageData& aClonedData)
 {
   UnpackClonedMessageData<CopyMemory, Child>(aClonedData, *this);
 }
 
