# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  17d67936debf8d6859ed4745f77c7cd8543fde32

diff --git a/testing/profiles/common/user.js b/testing/profiles/common/user.js
--- a/testing/profiles/common/user.js
+++ b/testing/profiles/common/user.js
@@ -59,8 +59,9 @@ user_pref("network.http.speculative-para
 // Set places maintenance far in the future (the maximum time possible in an
 // int32_t) to avoid it kicking in during tests. The maintenance can take a
 // relatively long time which may cause unnecessary intermittents and slow down
 // tests. This, like many things, will stop working correctly in 2038.
 user_pref("places.database.lastMaintenance", 2147483647);
 // Make enablePrivilege continue to work for test code. :-(
 user_pref("security.turn_off_all_security_so_that_viruses_can_take_over_this_computer", true);
 user_pref("xpinstall.signatures.required", false);
+user_pref("dom.serviceWorkers.parent_intercept", true);
diff --git a/testing/web-platform/meta/service-workers/__dir__.ini b/testing/web-platform/meta/service-workers/__dir__.ini
--- a/testing/web-platform/meta/service-workers/__dir__.ini
+++ b/testing/web-platform/meta/service-workers/__dir__.ini
@@ -1,2 +1,3 @@
 prefs: [javascript.options.streams:true,
-        dom.streams.enabled:true]
+        dom.streams.enabled:true,
+        dom.serviceWorkers.parent_intercept:true]
