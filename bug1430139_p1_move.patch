# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  1bbd0c5f9aa092472e93b1aa42179ef4a56e7e04
Bug 1430139 P1 Move code, tests, and moz.build rules to dom/serviceworkers. r=asuth

diff --git a/.eslintignore b/.eslintignore
--- a/.eslintignore
+++ b/.eslintignore
@@ -266,16 +266,17 @@ dom/secureelement/**
 dom/security/test/contentverifier/**
 dom/security/test/cors/**
 dom/security/test/csp/**
 dom/security/test/general/**
 dom/security/test/hsts/**
 dom/security/test/mixedcontentblocker/**
 dom/security/test/sri/**
 dom/security/test/unit/**
+dom/serviceworkers/**
 dom/smil/**
 dom/storage/**
 dom/svg/**
 dom/system/**
 dom/tests/browser/**
 dom/tests/html/**
 dom/tests/js/**
 dom/tests/mochitest/**
diff --git a/dom/moz.build b/dom/moz.build
--- a/dom/moz.build
+++ b/dom/moz.build
@@ -102,16 +102,17 @@ DIRS += [
     'console',
     'performance',
     'webbrowserpersist',
     'xhr',
     'worklet',
     'script',
     'payments',
     'websocket',
+    'serviceworkers',
 ]
 
 if CONFIG['OS_ARCH'] == 'WINNT':
     DIRS += ['plugins/ipc/hangui']
 
 if CONFIG['MOZ_SECUREELEMENT']:
     DIRS += ['secureelement']
 
diff --git a/dom/workers/IPCServiceWorkerDescriptor.ipdlh b/dom/serviceworkers/IPCServiceWorkerDescriptor.ipdlh
rename from dom/workers/IPCServiceWorkerDescriptor.ipdlh
rename to dom/serviceworkers/IPCServiceWorkerDescriptor.ipdlh
diff --git a/dom/workers/PServiceWorkerManager.ipdl b/dom/serviceworkers/PServiceWorkerManager.ipdl
rename from dom/workers/PServiceWorkerManager.ipdl
rename to dom/serviceworkers/PServiceWorkerManager.ipdl
diff --git a/dom/workers/PServiceWorkerUpdater.ipdl b/dom/serviceworkers/PServiceWorkerUpdater.ipdl
rename from dom/workers/PServiceWorkerUpdater.ipdl
rename to dom/serviceworkers/PServiceWorkerUpdater.ipdl
diff --git a/dom/workers/ServiceWorker.cpp b/dom/serviceworkers/ServiceWorker.cpp
rename from dom/workers/ServiceWorker.cpp
rename to dom/serviceworkers/ServiceWorker.cpp
diff --git a/dom/workers/ServiceWorker.h b/dom/serviceworkers/ServiceWorker.h
rename from dom/workers/ServiceWorker.h
rename to dom/serviceworkers/ServiceWorker.h
diff --git a/dom/workers/ServiceWorkerCommon.h b/dom/serviceworkers/ServiceWorkerCommon.h
rename from dom/workers/ServiceWorkerCommon.h
rename to dom/serviceworkers/ServiceWorkerCommon.h
diff --git a/dom/workers/ServiceWorkerContainer.cpp b/dom/serviceworkers/ServiceWorkerContainer.cpp
rename from dom/workers/ServiceWorkerContainer.cpp
rename to dom/serviceworkers/ServiceWorkerContainer.cpp
diff --git a/dom/workers/ServiceWorkerContainer.h b/dom/serviceworkers/ServiceWorkerContainer.h
rename from dom/workers/ServiceWorkerContainer.h
rename to dom/serviceworkers/ServiceWorkerContainer.h
diff --git a/dom/workers/ServiceWorkerDescriptor.cpp b/dom/serviceworkers/ServiceWorkerDescriptor.cpp
rename from dom/workers/ServiceWorkerDescriptor.cpp
rename to dom/serviceworkers/ServiceWorkerDescriptor.cpp
diff --git a/dom/workers/ServiceWorkerDescriptor.h b/dom/serviceworkers/ServiceWorkerDescriptor.h
rename from dom/workers/ServiceWorkerDescriptor.h
rename to dom/serviceworkers/ServiceWorkerDescriptor.h
diff --git a/dom/workers/ServiceWorkerEvents.cpp b/dom/serviceworkers/ServiceWorkerEvents.cpp
rename from dom/workers/ServiceWorkerEvents.cpp
rename to dom/serviceworkers/ServiceWorkerEvents.cpp
diff --git a/dom/workers/ServiceWorkerEvents.h b/dom/serviceworkers/ServiceWorkerEvents.h
rename from dom/workers/ServiceWorkerEvents.h
rename to dom/serviceworkers/ServiceWorkerEvents.h
diff --git a/dom/workers/ServiceWorkerIPCUtils.h b/dom/serviceworkers/ServiceWorkerIPCUtils.h
rename from dom/workers/ServiceWorkerIPCUtils.h
rename to dom/serviceworkers/ServiceWorkerIPCUtils.h
diff --git a/dom/workers/ServiceWorkerInfo.cpp b/dom/serviceworkers/ServiceWorkerInfo.cpp
rename from dom/workers/ServiceWorkerInfo.cpp
rename to dom/serviceworkers/ServiceWorkerInfo.cpp
diff --git a/dom/workers/ServiceWorkerInfo.h b/dom/serviceworkers/ServiceWorkerInfo.h
rename from dom/workers/ServiceWorkerInfo.h
rename to dom/serviceworkers/ServiceWorkerInfo.h
diff --git a/dom/workers/ServiceWorkerInterceptController.cpp b/dom/serviceworkers/ServiceWorkerInterceptController.cpp
rename from dom/workers/ServiceWorkerInterceptController.cpp
rename to dom/serviceworkers/ServiceWorkerInterceptController.cpp
diff --git a/dom/workers/ServiceWorkerInterceptController.h b/dom/serviceworkers/ServiceWorkerInterceptController.h
rename from dom/workers/ServiceWorkerInterceptController.h
rename to dom/serviceworkers/ServiceWorkerInterceptController.h
diff --git a/dom/workers/ServiceWorkerJob.cpp b/dom/serviceworkers/ServiceWorkerJob.cpp
rename from dom/workers/ServiceWorkerJob.cpp
rename to dom/serviceworkers/ServiceWorkerJob.cpp
diff --git a/dom/workers/ServiceWorkerJob.h b/dom/serviceworkers/ServiceWorkerJob.h
rename from dom/workers/ServiceWorkerJob.h
rename to dom/serviceworkers/ServiceWorkerJob.h
diff --git a/dom/workers/ServiceWorkerJobQueue.cpp b/dom/serviceworkers/ServiceWorkerJobQueue.cpp
rename from dom/workers/ServiceWorkerJobQueue.cpp
rename to dom/serviceworkers/ServiceWorkerJobQueue.cpp
diff --git a/dom/workers/ServiceWorkerJobQueue.h b/dom/serviceworkers/ServiceWorkerJobQueue.h
rename from dom/workers/ServiceWorkerJobQueue.h
rename to dom/serviceworkers/ServiceWorkerJobQueue.h
diff --git a/dom/workers/ServiceWorkerManager.cpp b/dom/serviceworkers/ServiceWorkerManager.cpp
rename from dom/workers/ServiceWorkerManager.cpp
rename to dom/serviceworkers/ServiceWorkerManager.cpp
diff --git a/dom/workers/ServiceWorkerManager.h b/dom/serviceworkers/ServiceWorkerManager.h
rename from dom/workers/ServiceWorkerManager.h
rename to dom/serviceworkers/ServiceWorkerManager.h
diff --git a/dom/workers/ServiceWorkerManagerChild.cpp b/dom/serviceworkers/ServiceWorkerManagerChild.cpp
rename from dom/workers/ServiceWorkerManagerChild.cpp
rename to dom/serviceworkers/ServiceWorkerManagerChild.cpp
diff --git a/dom/workers/ServiceWorkerManagerChild.h b/dom/serviceworkers/ServiceWorkerManagerChild.h
rename from dom/workers/ServiceWorkerManagerChild.h
rename to dom/serviceworkers/ServiceWorkerManagerChild.h
diff --git a/dom/workers/ServiceWorkerManagerParent.cpp b/dom/serviceworkers/ServiceWorkerManagerParent.cpp
rename from dom/workers/ServiceWorkerManagerParent.cpp
rename to dom/serviceworkers/ServiceWorkerManagerParent.cpp
diff --git a/dom/workers/ServiceWorkerManagerParent.h b/dom/serviceworkers/ServiceWorkerManagerParent.h
rename from dom/workers/ServiceWorkerManagerParent.h
rename to dom/serviceworkers/ServiceWorkerManagerParent.h
diff --git a/dom/workers/ServiceWorkerManagerService.cpp b/dom/serviceworkers/ServiceWorkerManagerService.cpp
rename from dom/workers/ServiceWorkerManagerService.cpp
rename to dom/serviceworkers/ServiceWorkerManagerService.cpp
diff --git a/dom/workers/ServiceWorkerManagerService.h b/dom/serviceworkers/ServiceWorkerManagerService.h
rename from dom/workers/ServiceWorkerManagerService.h
rename to dom/serviceworkers/ServiceWorkerManagerService.h
diff --git a/dom/workers/ServiceWorkerPrivate.cpp b/dom/serviceworkers/ServiceWorkerPrivate.cpp
rename from dom/workers/ServiceWorkerPrivate.cpp
rename to dom/serviceworkers/ServiceWorkerPrivate.cpp
diff --git a/dom/workers/ServiceWorkerPrivate.h b/dom/serviceworkers/ServiceWorkerPrivate.h
rename from dom/workers/ServiceWorkerPrivate.h
rename to dom/serviceworkers/ServiceWorkerPrivate.h
diff --git a/dom/workers/ServiceWorkerRegisterJob.cpp b/dom/serviceworkers/ServiceWorkerRegisterJob.cpp
rename from dom/workers/ServiceWorkerRegisterJob.cpp
rename to dom/serviceworkers/ServiceWorkerRegisterJob.cpp
diff --git a/dom/workers/ServiceWorkerRegisterJob.h b/dom/serviceworkers/ServiceWorkerRegisterJob.h
rename from dom/workers/ServiceWorkerRegisterJob.h
rename to dom/serviceworkers/ServiceWorkerRegisterJob.h
diff --git a/dom/workers/ServiceWorkerRegistrar.cpp b/dom/serviceworkers/ServiceWorkerRegistrar.cpp
rename from dom/workers/ServiceWorkerRegistrar.cpp
rename to dom/serviceworkers/ServiceWorkerRegistrar.cpp
diff --git a/dom/workers/ServiceWorkerRegistrar.h b/dom/serviceworkers/ServiceWorkerRegistrar.h
rename from dom/workers/ServiceWorkerRegistrar.h
rename to dom/serviceworkers/ServiceWorkerRegistrar.h
diff --git a/dom/workers/ServiceWorkerRegistrarTypes.ipdlh b/dom/serviceworkers/ServiceWorkerRegistrarTypes.ipdlh
rename from dom/workers/ServiceWorkerRegistrarTypes.ipdlh
rename to dom/serviceworkers/ServiceWorkerRegistrarTypes.ipdlh
diff --git a/dom/workers/ServiceWorkerRegistration.cpp b/dom/serviceworkers/ServiceWorkerRegistration.cpp
rename from dom/workers/ServiceWorkerRegistration.cpp
rename to dom/serviceworkers/ServiceWorkerRegistration.cpp
diff --git a/dom/workers/ServiceWorkerRegistration.h b/dom/serviceworkers/ServiceWorkerRegistration.h
rename from dom/workers/ServiceWorkerRegistration.h
rename to dom/serviceworkers/ServiceWorkerRegistration.h
diff --git a/dom/workers/ServiceWorkerRegistrationInfo.cpp b/dom/serviceworkers/ServiceWorkerRegistrationInfo.cpp
rename from dom/workers/ServiceWorkerRegistrationInfo.cpp
rename to dom/serviceworkers/ServiceWorkerRegistrationInfo.cpp
diff --git a/dom/workers/ServiceWorkerRegistrationInfo.h b/dom/serviceworkers/ServiceWorkerRegistrationInfo.h
rename from dom/workers/ServiceWorkerRegistrationInfo.h
rename to dom/serviceworkers/ServiceWorkerRegistrationInfo.h
diff --git a/dom/workers/ServiceWorkerScriptCache.cpp b/dom/serviceworkers/ServiceWorkerScriptCache.cpp
rename from dom/workers/ServiceWorkerScriptCache.cpp
rename to dom/serviceworkers/ServiceWorkerScriptCache.cpp
diff --git a/dom/workers/ServiceWorkerScriptCache.h b/dom/serviceworkers/ServiceWorkerScriptCache.h
rename from dom/workers/ServiceWorkerScriptCache.h
rename to dom/serviceworkers/ServiceWorkerScriptCache.h
diff --git a/dom/workers/ServiceWorkerUnregisterJob.cpp b/dom/serviceworkers/ServiceWorkerUnregisterJob.cpp
rename from dom/workers/ServiceWorkerUnregisterJob.cpp
rename to dom/serviceworkers/ServiceWorkerUnregisterJob.cpp
diff --git a/dom/workers/ServiceWorkerUnregisterJob.h b/dom/serviceworkers/ServiceWorkerUnregisterJob.h
rename from dom/workers/ServiceWorkerUnregisterJob.h
rename to dom/serviceworkers/ServiceWorkerUnregisterJob.h
diff --git a/dom/workers/ServiceWorkerUpdateJob.cpp b/dom/serviceworkers/ServiceWorkerUpdateJob.cpp
rename from dom/workers/ServiceWorkerUpdateJob.cpp
rename to dom/serviceworkers/ServiceWorkerUpdateJob.cpp
diff --git a/dom/workers/ServiceWorkerUpdateJob.h b/dom/serviceworkers/ServiceWorkerUpdateJob.h
rename from dom/workers/ServiceWorkerUpdateJob.h
rename to dom/serviceworkers/ServiceWorkerUpdateJob.h
diff --git a/dom/workers/ServiceWorkerUpdaterChild.cpp b/dom/serviceworkers/ServiceWorkerUpdaterChild.cpp
rename from dom/workers/ServiceWorkerUpdaterChild.cpp
rename to dom/serviceworkers/ServiceWorkerUpdaterChild.cpp
diff --git a/dom/workers/ServiceWorkerUpdaterChild.h b/dom/serviceworkers/ServiceWorkerUpdaterChild.h
rename from dom/workers/ServiceWorkerUpdaterChild.h
rename to dom/serviceworkers/ServiceWorkerUpdaterChild.h
diff --git a/dom/workers/ServiceWorkerUpdaterParent.cpp b/dom/serviceworkers/ServiceWorkerUpdaterParent.cpp
rename from dom/workers/ServiceWorkerUpdaterParent.cpp
rename to dom/serviceworkers/ServiceWorkerUpdaterParent.cpp
diff --git a/dom/workers/ServiceWorkerUpdaterParent.h b/dom/serviceworkers/ServiceWorkerUpdaterParent.h
rename from dom/workers/ServiceWorkerUpdaterParent.h
rename to dom/serviceworkers/ServiceWorkerUpdaterParent.h
diff --git a/dom/workers/ServiceWorkerUtils.cpp b/dom/serviceworkers/ServiceWorkerUtils.cpp
rename from dom/workers/ServiceWorkerUtils.cpp
rename to dom/serviceworkers/ServiceWorkerUtils.cpp
diff --git a/dom/workers/ServiceWorkerUtils.h b/dom/serviceworkers/ServiceWorkerUtils.h
rename from dom/workers/ServiceWorkerUtils.h
rename to dom/serviceworkers/ServiceWorkerUtils.h
diff --git a/dom/serviceworkers/moz.build b/dom/serviceworkers/moz.build
new file mode 100644
--- /dev/null
+++ b/dom/serviceworkers/moz.build
@@ -0,0 +1,88 @@
+# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-
+# vim: set filetype=python:
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+
+with Files("**"):
+    BUG_COMPONENT = ("Core", "DOM: Service Workers")
+
+# Public stuff.
+EXPORTS.mozilla.dom += [
+    'ServiceWorkerCommon.h',
+    'ServiceWorkerContainer.h',
+    'ServiceWorkerDescriptor.h',
+    'ServiceWorkerEvents.h',
+    'ServiceWorkerInterceptController.h',
+    'ServiceWorkerIPCUtils.h',
+    'ServiceWorkerRegistrar.h',
+    'ServiceWorkerRegistration.h',
+    'ServiceWorkerUtils.h',
+]
+
+EXPORTS.mozilla.dom.workers += [
+    'ServiceWorkerInfo.h',
+    'ServiceWorkerManager.h',
+    'ServiceWorkerManagerChild.h',
+    'ServiceWorkerManagerParent.h',
+    'ServiceWorkerRegistrationInfo.h',
+]
+
+# Stuff needed for the bindings, not really public though.
+EXPORTS.mozilla.dom.workers.bindings += [
+    'ServiceWorker.h',
+]
+
+UNIFIED_SOURCES += [
+    'ServiceWorker.cpp',
+    'ServiceWorkerContainer.cpp',
+    'ServiceWorkerDescriptor.cpp',
+    'ServiceWorkerEvents.cpp',
+    'ServiceWorkerInfo.cpp',
+    'ServiceWorkerInterceptController.cpp',
+    'ServiceWorkerJob.cpp',
+    'ServiceWorkerJobQueue.cpp',
+    'ServiceWorkerManager.cpp',
+    'ServiceWorkerManagerChild.cpp',
+    'ServiceWorkerManagerParent.cpp',
+    'ServiceWorkerManagerService.cpp',
+    'ServiceWorkerPrivate.cpp',
+    'ServiceWorkerRegisterJob.cpp',
+    'ServiceWorkerRegistrar.cpp',
+    'ServiceWorkerRegistration.cpp',
+    'ServiceWorkerRegistrationInfo.cpp',
+    'ServiceWorkerScriptCache.cpp',
+    'ServiceWorkerUnregisterJob.cpp',
+    'ServiceWorkerUpdateJob.cpp',
+    'ServiceWorkerUpdaterChild.cpp',
+    'ServiceWorkerUpdaterParent.cpp',
+    'ServiceWorkerUtils.cpp',
+]
+
+IPDL_SOURCES += [
+    'IPCServiceWorkerDescriptor.ipdlh',
+    'PServiceWorkerManager.ipdl',
+    'PServiceWorkerUpdater.ipdl',
+    'ServiceWorkerRegistrarTypes.ipdlh',
+]
+
+LOCAL_INCLUDES += [
+    '/dom/workers',
+]
+
+include('/ipc/chromium/chromium-config.mozbuild')
+
+FINAL_LIBRARY = 'xul'
+
+MOCHITEST_MANIFESTS += [
+    'test/mochitest.ini',
+]
+
+MOCHITEST_CHROME_MANIFESTS += [
+    'test/chrome.ini',
+]
+
+BROWSER_CHROME_MANIFESTS += [
+    'test/browser.ini',
+    'test/isolated/multi-e10s-update/browser.ini',
+]
diff --git a/dom/workers/test/serviceworkers/activate_event_error_worker.js b/dom/serviceworkers/test/activate_event_error_worker.js
rename from dom/workers/test/serviceworkers/activate_event_error_worker.js
rename to dom/serviceworkers/test/activate_event_error_worker.js
diff --git a/dom/workers/test/serviceworkers/async_waituntil_worker.js b/dom/serviceworkers/test/async_waituntil_worker.js
rename from dom/workers/test/serviceworkers/async_waituntil_worker.js
rename to dom/serviceworkers/test/async_waituntil_worker.js
diff --git a/dom/workers/test/serviceworkers/blocking_install_event_worker.js b/dom/serviceworkers/test/blocking_install_event_worker.js
rename from dom/workers/test/serviceworkers/blocking_install_event_worker.js
rename to dom/serviceworkers/test/blocking_install_event_worker.js
diff --git a/dom/workers/test/serviceworkers/browser.ini b/dom/serviceworkers/test/browser.ini
rename from dom/workers/test/serviceworkers/browser.ini
rename to dom/serviceworkers/test/browser.ini
diff --git a/dom/workers/test/serviceworkers/browser_base_force_refresh.html b/dom/serviceworkers/test/browser_base_force_refresh.html
rename from dom/workers/test/serviceworkers/browser_base_force_refresh.html
rename to dom/serviceworkers/test/browser_base_force_refresh.html
diff --git a/dom/workers/test/serviceworkers/browser_cached_force_refresh.html b/dom/serviceworkers/test/browser_cached_force_refresh.html
rename from dom/workers/test/serviceworkers/browser_cached_force_refresh.html
rename to dom/serviceworkers/test/browser_cached_force_refresh.html
diff --git a/dom/workers/test/serviceworkers/browser_devtools_serviceworker_interception.js b/dom/serviceworkers/test/browser_devtools_serviceworker_interception.js
rename from dom/workers/test/serviceworkers/browser_devtools_serviceworker_interception.js
rename to dom/serviceworkers/test/browser_devtools_serviceworker_interception.js
diff --git a/dom/workers/test/serviceworkers/browser_download.js b/dom/serviceworkers/test/browser_download.js
rename from dom/workers/test/serviceworkers/browser_download.js
rename to dom/serviceworkers/test/browser_download.js
diff --git a/dom/workers/test/serviceworkers/browser_download_canceled.js b/dom/serviceworkers/test/browser_download_canceled.js
rename from dom/workers/test/serviceworkers/browser_download_canceled.js
rename to dom/serviceworkers/test/browser_download_canceled.js
diff --git a/dom/workers/test/serviceworkers/browser_force_refresh.js b/dom/serviceworkers/test/browser_force_refresh.js
rename from dom/workers/test/serviceworkers/browser_force_refresh.js
rename to dom/serviceworkers/test/browser_force_refresh.js
diff --git a/dom/workers/test/serviceworkers/browser_storage_permission.js b/dom/serviceworkers/test/browser_storage_permission.js
rename from dom/workers/test/serviceworkers/browser_storage_permission.js
rename to dom/serviceworkers/test/browser_storage_permission.js
diff --git a/dom/workers/test/serviceworkers/browser_unregister_with_containers.js b/dom/serviceworkers/test/browser_unregister_with_containers.js
rename from dom/workers/test/serviceworkers/browser_unregister_with_containers.js
rename to dom/serviceworkers/test/browser_unregister_with_containers.js
diff --git a/dom/workers/test/serviceworkers/browser_userContextId_openWindow.js b/dom/serviceworkers/test/browser_userContextId_openWindow.js
rename from dom/workers/test/serviceworkers/browser_userContextId_openWindow.js
rename to dom/serviceworkers/test/browser_userContextId_openWindow.js
diff --git a/dom/workers/test/serviceworkers/bug1151916_driver.html b/dom/serviceworkers/test/bug1151916_driver.html
rename from dom/workers/test/serviceworkers/bug1151916_driver.html
rename to dom/serviceworkers/test/bug1151916_driver.html
diff --git a/dom/workers/test/serviceworkers/bug1151916_worker.js b/dom/serviceworkers/test/bug1151916_worker.js
rename from dom/workers/test/serviceworkers/bug1151916_worker.js
rename to dom/serviceworkers/test/bug1151916_worker.js
diff --git a/dom/workers/test/serviceworkers/bug1240436_worker.js b/dom/serviceworkers/test/bug1240436_worker.js
rename from dom/workers/test/serviceworkers/bug1240436_worker.js
rename to dom/serviceworkers/test/bug1240436_worker.js
diff --git a/dom/workers/test/serviceworkers/bug1290951_worker_imported.sjs b/dom/serviceworkers/test/bug1290951_worker_imported.sjs
rename from dom/workers/test/serviceworkers/bug1290951_worker_imported.sjs
rename to dom/serviceworkers/test/bug1290951_worker_imported.sjs
diff --git a/dom/workers/test/serviceworkers/bug1290951_worker_main.sjs b/dom/serviceworkers/test/bug1290951_worker_main.sjs
rename from dom/workers/test/serviceworkers/bug1290951_worker_main.sjs
rename to dom/serviceworkers/test/bug1290951_worker_main.sjs
diff --git a/dom/workers/test/serviceworkers/chrome.ini b/dom/serviceworkers/test/chrome.ini
rename from dom/workers/test/serviceworkers/chrome.ini
rename to dom/serviceworkers/test/chrome.ini
diff --git a/dom/workers/test/serviceworkers/chrome_helpers.js b/dom/serviceworkers/test/chrome_helpers.js
rename from dom/workers/test/serviceworkers/chrome_helpers.js
rename to dom/serviceworkers/test/chrome_helpers.js
diff --git a/dom/workers/test/serviceworkers/claim_clients/client.html b/dom/serviceworkers/test/claim_clients/client.html
rename from dom/workers/test/serviceworkers/claim_clients/client.html
rename to dom/serviceworkers/test/claim_clients/client.html
diff --git a/dom/workers/test/serviceworkers/claim_oninstall_worker.js b/dom/serviceworkers/test/claim_oninstall_worker.js
rename from dom/workers/test/serviceworkers/claim_oninstall_worker.js
rename to dom/serviceworkers/test/claim_oninstall_worker.js
diff --git a/dom/workers/test/serviceworkers/claim_worker_1.js b/dom/serviceworkers/test/claim_worker_1.js
rename from dom/workers/test/serviceworkers/claim_worker_1.js
rename to dom/serviceworkers/test/claim_worker_1.js
diff --git a/dom/workers/test/serviceworkers/claim_worker_2.js b/dom/serviceworkers/test/claim_worker_2.js
rename from dom/workers/test/serviceworkers/claim_worker_2.js
rename to dom/serviceworkers/test/claim_worker_2.js
diff --git a/dom/workers/test/serviceworkers/close_test.js b/dom/serviceworkers/test/close_test.js
rename from dom/workers/test/serviceworkers/close_test.js
rename to dom/serviceworkers/test/close_test.js
diff --git a/dom/workers/test/serviceworkers/controller/index.html b/dom/serviceworkers/test/controller/index.html
rename from dom/workers/test/serviceworkers/controller/index.html
rename to dom/serviceworkers/test/controller/index.html
diff --git a/dom/workers/test/serviceworkers/create_another_sharedWorker.html b/dom/serviceworkers/test/create_another_sharedWorker.html
rename from dom/workers/test/serviceworkers/create_another_sharedWorker.html
rename to dom/serviceworkers/test/create_another_sharedWorker.html
diff --git a/dom/workers/test/serviceworkers/download/window.html b/dom/serviceworkers/test/download/window.html
rename from dom/workers/test/serviceworkers/download/window.html
rename to dom/serviceworkers/test/download/window.html
diff --git a/dom/workers/test/serviceworkers/download/worker.js b/dom/serviceworkers/test/download/worker.js
rename from dom/workers/test/serviceworkers/download/worker.js
rename to dom/serviceworkers/test/download/worker.js
diff --git a/dom/workers/test/serviceworkers/download_canceled/page_download_canceled.html b/dom/serviceworkers/test/download_canceled/page_download_canceled.html
rename from dom/workers/test/serviceworkers/download_canceled/page_download_canceled.html
rename to dom/serviceworkers/test/download_canceled/page_download_canceled.html
diff --git a/dom/workers/test/serviceworkers/download_canceled/server-stream-download.sjs b/dom/serviceworkers/test/download_canceled/server-stream-download.sjs
rename from dom/workers/test/serviceworkers/download_canceled/server-stream-download.sjs
rename to dom/serviceworkers/test/download_canceled/server-stream-download.sjs
diff --git a/dom/workers/test/serviceworkers/download_canceled/sw_download_canceled.js b/dom/serviceworkers/test/download_canceled/sw_download_canceled.js
rename from dom/workers/test/serviceworkers/download_canceled/sw_download_canceled.js
rename to dom/serviceworkers/test/download_canceled/sw_download_canceled.js
diff --git a/dom/workers/test/serviceworkers/empty.html b/dom/serviceworkers/test/empty.html
rename from dom/workers/test/serviceworkers/empty.html
rename to dom/serviceworkers/test/empty.html
diff --git a/dom/workers/test/serviceworkers/empty.js b/dom/serviceworkers/test/empty.js
rename from dom/workers/test/serviceworkers/empty.js
rename to dom/serviceworkers/test/empty.js
diff --git a/dom/workers/test/serviceworkers/error_reporting_helpers.js b/dom/serviceworkers/test/error_reporting_helpers.js
rename from dom/workers/test/serviceworkers/error_reporting_helpers.js
rename to dom/serviceworkers/test/error_reporting_helpers.js
diff --git a/dom/workers/test/serviceworkers/eval_worker.js b/dom/serviceworkers/test/eval_worker.js
rename from dom/workers/test/serviceworkers/eval_worker.js
rename to dom/serviceworkers/test/eval_worker.js
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource.resource b/dom/serviceworkers/test/eventsource/eventsource.resource
rename from dom/workers/test/serviceworkers/eventsource/eventsource.resource
rename to dom/serviceworkers/test/eventsource/eventsource.resource
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource.resource^headers^ b/dom/serviceworkers/test/eventsource/eventsource.resource^headers^
rename from dom/workers/test/serviceworkers/eventsource/eventsource.resource^headers^
rename to dom/serviceworkers/test/eventsource/eventsource.resource^headers^
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_cors_response.html b/dom/serviceworkers/test/eventsource/eventsource_cors_response.html
rename from dom/workers/test/serviceworkers/eventsource/eventsource_cors_response.html
rename to dom/serviceworkers/test/eventsource/eventsource_cors_response.html
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_cors_response_intercept_worker.js b/dom/serviceworkers/test/eventsource/eventsource_cors_response_intercept_worker.js
rename from dom/workers/test/serviceworkers/eventsource/eventsource_cors_response_intercept_worker.js
rename to dom/serviceworkers/test/eventsource/eventsource_cors_response_intercept_worker.js
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_mixed_content_cors_response.html b/dom/serviceworkers/test/eventsource/eventsource_mixed_content_cors_response.html
rename from dom/workers/test/serviceworkers/eventsource/eventsource_mixed_content_cors_response.html
rename to dom/serviceworkers/test/eventsource/eventsource_mixed_content_cors_response.html
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_mixed_content_cors_response_intercept_worker.js b/dom/serviceworkers/test/eventsource/eventsource_mixed_content_cors_response_intercept_worker.js
rename from dom/workers/test/serviceworkers/eventsource/eventsource_mixed_content_cors_response_intercept_worker.js
rename to dom/serviceworkers/test/eventsource/eventsource_mixed_content_cors_response_intercept_worker.js
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_opaque_response.html b/dom/serviceworkers/test/eventsource/eventsource_opaque_response.html
rename from dom/workers/test/serviceworkers/eventsource/eventsource_opaque_response.html
rename to dom/serviceworkers/test/eventsource/eventsource_opaque_response.html
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_opaque_response_intercept_worker.js b/dom/serviceworkers/test/eventsource/eventsource_opaque_response_intercept_worker.js
rename from dom/workers/test/serviceworkers/eventsource/eventsource_opaque_response_intercept_worker.js
rename to dom/serviceworkers/test/eventsource/eventsource_opaque_response_intercept_worker.js
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_register_worker.html b/dom/serviceworkers/test/eventsource/eventsource_register_worker.html
rename from dom/workers/test/serviceworkers/eventsource/eventsource_register_worker.html
rename to dom/serviceworkers/test/eventsource/eventsource_register_worker.html
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_synthetic_response.html b/dom/serviceworkers/test/eventsource/eventsource_synthetic_response.html
rename from dom/workers/test/serviceworkers/eventsource/eventsource_synthetic_response.html
rename to dom/serviceworkers/test/eventsource/eventsource_synthetic_response.html
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_synthetic_response_intercept_worker.js b/dom/serviceworkers/test/eventsource/eventsource_synthetic_response_intercept_worker.js
rename from dom/workers/test/serviceworkers/eventsource/eventsource_synthetic_response_intercept_worker.js
rename to dom/serviceworkers/test/eventsource/eventsource_synthetic_response_intercept_worker.js
diff --git a/dom/workers/test/serviceworkers/eventsource/eventsource_worker_helper.js b/dom/serviceworkers/test/eventsource/eventsource_worker_helper.js
rename from dom/workers/test/serviceworkers/eventsource/eventsource_worker_helper.js
rename to dom/serviceworkers/test/eventsource/eventsource_worker_helper.js
diff --git a/dom/workers/test/serviceworkers/fetch.js b/dom/serviceworkers/test/fetch.js
rename from dom/workers/test/serviceworkers/fetch.js
rename to dom/serviceworkers/test/fetch.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/beacon.sjs b/dom/serviceworkers/test/fetch/context/beacon.sjs
rename from dom/workers/test/serviceworkers/fetch/context/beacon.sjs
rename to dom/serviceworkers/test/fetch/context/beacon.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/context/context_test.js b/dom/serviceworkers/test/fetch/context/context_test.js
rename from dom/workers/test/serviceworkers/fetch/context/context_test.js
rename to dom/serviceworkers/test/fetch/context/context_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/csp-violate.sjs b/dom/serviceworkers/test/fetch/context/csp-violate.sjs
rename from dom/workers/test/serviceworkers/fetch/context/csp-violate.sjs
rename to dom/serviceworkers/test/fetch/context/csp-violate.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/context/index.html b/dom/serviceworkers/test/fetch/context/index.html
rename from dom/workers/test/serviceworkers/fetch/context/index.html
rename to dom/serviceworkers/test/fetch/context/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/context/parentsharedworker.js b/dom/serviceworkers/test/fetch/context/parentsharedworker.js
rename from dom/workers/test/serviceworkers/fetch/context/parentsharedworker.js
rename to dom/serviceworkers/test/fetch/context/parentsharedworker.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/parentworker.js b/dom/serviceworkers/test/fetch/context/parentworker.js
rename from dom/workers/test/serviceworkers/fetch/context/parentworker.js
rename to dom/serviceworkers/test/fetch/context/parentworker.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/ping.html b/dom/serviceworkers/test/fetch/context/ping.html
rename from dom/workers/test/serviceworkers/fetch/context/ping.html
rename to dom/serviceworkers/test/fetch/context/ping.html
diff --git a/dom/workers/test/serviceworkers/fetch/context/realaudio.ogg b/dom/serviceworkers/test/fetch/context/realaudio.ogg
rename from dom/workers/test/serviceworkers/fetch/context/realaudio.ogg
rename to dom/serviceworkers/test/fetch/context/realaudio.ogg
diff --git a/dom/workers/test/serviceworkers/fetch/context/realimg.jpg b/dom/serviceworkers/test/fetch/context/realimg.jpg
rename from dom/workers/test/serviceworkers/fetch/context/realimg.jpg
rename to dom/serviceworkers/test/fetch/context/realimg.jpg
diff --git a/dom/workers/test/serviceworkers/fetch/context/register.html b/dom/serviceworkers/test/fetch/context/register.html
rename from dom/workers/test/serviceworkers/fetch/context/register.html
rename to dom/serviceworkers/test/fetch/context/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/context/sharedworker.js b/dom/serviceworkers/test/fetch/context/sharedworker.js
rename from dom/workers/test/serviceworkers/fetch/context/sharedworker.js
rename to dom/serviceworkers/test/fetch/context/sharedworker.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/unregister.html b/dom/serviceworkers/test/fetch/context/unregister.html
rename from dom/workers/test/serviceworkers/fetch/context/unregister.html
rename to dom/serviceworkers/test/fetch/context/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/context/worker.js b/dom/serviceworkers/test/fetch/context/worker.js
rename from dom/workers/test/serviceworkers/fetch/context/worker.js
rename to dom/serviceworkers/test/fetch/context/worker.js
diff --git a/dom/workers/test/serviceworkers/fetch/context/xml.xml b/dom/serviceworkers/test/fetch/context/xml.xml
rename from dom/workers/test/serviceworkers/fetch/context/xml.xml
rename to dom/serviceworkers/test/fetch/context/xml.xml
diff --git a/dom/workers/test/serviceworkers/fetch/cookie/cookie_test.js b/dom/serviceworkers/test/fetch/cookie/cookie_test.js
rename from dom/workers/test/serviceworkers/fetch/cookie/cookie_test.js
rename to dom/serviceworkers/test/fetch/cookie/cookie_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/cookie/register.html b/dom/serviceworkers/test/fetch/cookie/register.html
rename from dom/workers/test/serviceworkers/fetch/cookie/register.html
rename to dom/serviceworkers/test/fetch/cookie/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/cookie/unregister.html b/dom/serviceworkers/test/fetch/cookie/unregister.html
rename from dom/workers/test/serviceworkers/fetch/cookie/unregister.html
rename to dom/serviceworkers/test/fetch/cookie/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/deliver-gzip.sjs b/dom/serviceworkers/test/fetch/deliver-gzip.sjs
rename from dom/workers/test/serviceworkers/fetch/deliver-gzip.sjs
rename to dom/serviceworkers/test/fetch/deliver-gzip.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/fetch_tests.js b/dom/serviceworkers/test/fetch/fetch_tests.js
rename from dom/workers/test/serviceworkers/fetch/fetch_tests.js
rename to dom/serviceworkers/test/fetch/fetch_tests.js
diff --git a/dom/workers/test/serviceworkers/fetch/fetch_worker_script.js b/dom/serviceworkers/test/fetch/fetch_worker_script.js
rename from dom/workers/test/serviceworkers/fetch/fetch_worker_script.js
rename to dom/serviceworkers/test/fetch/fetch_worker_script.js
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/embedder.html b/dom/serviceworkers/test/fetch/hsts/embedder.html
rename from dom/workers/test/serviceworkers/fetch/hsts/embedder.html
rename to dom/serviceworkers/test/fetch/hsts/embedder.html
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/hsts_test.js b/dom/serviceworkers/test/fetch/hsts/hsts_test.js
rename from dom/workers/test/serviceworkers/fetch/hsts/hsts_test.js
rename to dom/serviceworkers/test/fetch/hsts/hsts_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/image-20px.png b/dom/serviceworkers/test/fetch/hsts/image-20px.png
rename from dom/workers/test/serviceworkers/fetch/hsts/image-20px.png
rename to dom/serviceworkers/test/fetch/hsts/image-20px.png
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/image-40px.png b/dom/serviceworkers/test/fetch/hsts/image-40px.png
rename from dom/workers/test/serviceworkers/fetch/hsts/image-40px.png
rename to dom/serviceworkers/test/fetch/hsts/image-40px.png
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/image.html b/dom/serviceworkers/test/fetch/hsts/image.html
rename from dom/workers/test/serviceworkers/fetch/hsts/image.html
rename to dom/serviceworkers/test/fetch/hsts/image.html
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/realindex.html b/dom/serviceworkers/test/fetch/hsts/realindex.html
rename from dom/workers/test/serviceworkers/fetch/hsts/realindex.html
rename to dom/serviceworkers/test/fetch/hsts/realindex.html
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/register.html b/dom/serviceworkers/test/fetch/hsts/register.html
rename from dom/workers/test/serviceworkers/fetch/hsts/register.html
rename to dom/serviceworkers/test/fetch/hsts/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/register.html^headers^ b/dom/serviceworkers/test/fetch/hsts/register.html^headers^
rename from dom/workers/test/serviceworkers/fetch/hsts/register.html^headers^
rename to dom/serviceworkers/test/fetch/hsts/register.html^headers^
diff --git a/dom/workers/test/serviceworkers/fetch/hsts/unregister.html b/dom/serviceworkers/test/fetch/hsts/unregister.html
rename from dom/workers/test/serviceworkers/fetch/hsts/unregister.html
rename to dom/serviceworkers/test/fetch/hsts/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/clonedresponse/https_test.js b/dom/serviceworkers/test/fetch/https/clonedresponse/https_test.js
rename from dom/workers/test/serviceworkers/fetch/https/clonedresponse/https_test.js
rename to dom/serviceworkers/test/fetch/https/clonedresponse/https_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/https/clonedresponse/index.html b/dom/serviceworkers/test/fetch/https/clonedresponse/index.html
rename from dom/workers/test/serviceworkers/fetch/https/clonedresponse/index.html
rename to dom/serviceworkers/test/fetch/https/clonedresponse/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/clonedresponse/register.html b/dom/serviceworkers/test/fetch/https/clonedresponse/register.html
rename from dom/workers/test/serviceworkers/fetch/https/clonedresponse/register.html
rename to dom/serviceworkers/test/fetch/https/clonedresponse/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/clonedresponse/unregister.html b/dom/serviceworkers/test/fetch/https/clonedresponse/unregister.html
rename from dom/workers/test/serviceworkers/fetch/https/clonedresponse/unregister.html
rename to dom/serviceworkers/test/fetch/https/clonedresponse/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/https_test.js b/dom/serviceworkers/test/fetch/https/https_test.js
rename from dom/workers/test/serviceworkers/fetch/https/https_test.js
rename to dom/serviceworkers/test/fetch/https/https_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/https/index.html b/dom/serviceworkers/test/fetch/https/index.html
rename from dom/workers/test/serviceworkers/fetch/https/index.html
rename to dom/serviceworkers/test/fetch/https/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/register.html b/dom/serviceworkers/test/fetch/https/register.html
rename from dom/workers/test/serviceworkers/fetch/https/register.html
rename to dom/serviceworkers/test/fetch/https/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/https/unregister.html b/dom/serviceworkers/test/fetch/https/unregister.html
rename from dom/workers/test/serviceworkers/fetch/https/unregister.html
rename to dom/serviceworkers/test/fetch/https/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/image-20px.png b/dom/serviceworkers/test/fetch/imagecache-maxage/image-20px.png
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/image-20px.png
rename to dom/serviceworkers/test/fetch/imagecache-maxage/image-20px.png
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/image-40px.png b/dom/serviceworkers/test/fetch/imagecache-maxage/image-40px.png
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/image-40px.png
rename to dom/serviceworkers/test/fetch/imagecache-maxage/image-40px.png
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/index.html b/dom/serviceworkers/test/fetch/imagecache-maxage/index.html
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/index.html
rename to dom/serviceworkers/test/fetch/imagecache-maxage/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/maxage_test.js b/dom/serviceworkers/test/fetch/imagecache-maxage/maxage_test.js
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/maxage_test.js
rename to dom/serviceworkers/test/fetch/imagecache-maxage/maxage_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/register.html b/dom/serviceworkers/test/fetch/imagecache-maxage/register.html
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/register.html
rename to dom/serviceworkers/test/fetch/imagecache-maxage/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache-maxage/unregister.html b/dom/serviceworkers/test/fetch/imagecache-maxage/unregister.html
rename from dom/workers/test/serviceworkers/fetch/imagecache-maxage/unregister.html
rename to dom/serviceworkers/test/fetch/imagecache-maxage/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/image-20px.png b/dom/serviceworkers/test/fetch/imagecache/image-20px.png
rename from dom/workers/test/serviceworkers/fetch/imagecache/image-20px.png
rename to dom/serviceworkers/test/fetch/imagecache/image-20px.png
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/image-40px.png b/dom/serviceworkers/test/fetch/imagecache/image-40px.png
rename from dom/workers/test/serviceworkers/fetch/imagecache/image-40px.png
rename to dom/serviceworkers/test/fetch/imagecache/image-40px.png
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/imagecache_test.js b/dom/serviceworkers/test/fetch/imagecache/imagecache_test.js
rename from dom/workers/test/serviceworkers/fetch/imagecache/imagecache_test.js
rename to dom/serviceworkers/test/fetch/imagecache/imagecache_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/index.html b/dom/serviceworkers/test/fetch/imagecache/index.html
rename from dom/workers/test/serviceworkers/fetch/imagecache/index.html
rename to dom/serviceworkers/test/fetch/imagecache/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/postmortem.html b/dom/serviceworkers/test/fetch/imagecache/postmortem.html
rename from dom/workers/test/serviceworkers/fetch/imagecache/postmortem.html
rename to dom/serviceworkers/test/fetch/imagecache/postmortem.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/register.html b/dom/serviceworkers/test/fetch/imagecache/register.html
rename from dom/workers/test/serviceworkers/fetch/imagecache/register.html
rename to dom/serviceworkers/test/fetch/imagecache/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/imagecache/unregister.html b/dom/serviceworkers/test/fetch/imagecache/unregister.html
rename from dom/workers/test/serviceworkers/fetch/imagecache/unregister.html
rename to dom/serviceworkers/test/fetch/imagecache/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/https_test.js b/dom/serviceworkers/test/fetch/importscript-mixedcontent/https_test.js
rename from dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/https_test.js
rename to dom/serviceworkers/test/fetch/importscript-mixedcontent/https_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/register.html b/dom/serviceworkers/test/fetch/importscript-mixedcontent/register.html
rename from dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/register.html
rename to dom/serviceworkers/test/fetch/importscript-mixedcontent/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/unregister.html b/dom/serviceworkers/test/fetch/importscript-mixedcontent/unregister.html
rename from dom/workers/test/serviceworkers/fetch/importscript-mixedcontent/unregister.html
rename to dom/serviceworkers/test/fetch/importscript-mixedcontent/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/index.html b/dom/serviceworkers/test/fetch/index.html
rename from dom/workers/test/serviceworkers/fetch/index.html
rename to dom/serviceworkers/test/fetch/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/interrupt.sjs b/dom/serviceworkers/test/fetch/interrupt.sjs
rename from dom/workers/test/serviceworkers/fetch/interrupt.sjs
rename to dom/serviceworkers/test/fetch/interrupt.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/index-https.sjs b/dom/serviceworkers/test/fetch/origin/https/index-https.sjs
rename from dom/workers/test/serviceworkers/fetch/origin/https/index-https.sjs
rename to dom/serviceworkers/test/fetch/origin/https/index-https.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/origin_test.js b/dom/serviceworkers/test/fetch/origin/https/origin_test.js
rename from dom/workers/test/serviceworkers/fetch/origin/https/origin_test.js
rename to dom/serviceworkers/test/fetch/origin/https/origin_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/realindex.html b/dom/serviceworkers/test/fetch/origin/https/realindex.html
rename from dom/workers/test/serviceworkers/fetch/origin/https/realindex.html
rename to dom/serviceworkers/test/fetch/origin/https/realindex.html
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/realindex.html^headers^ b/dom/serviceworkers/test/fetch/origin/https/realindex.html^headers^
rename from dom/workers/test/serviceworkers/fetch/origin/https/realindex.html^headers^
rename to dom/serviceworkers/test/fetch/origin/https/realindex.html^headers^
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/register.html b/dom/serviceworkers/test/fetch/origin/https/register.html
rename from dom/workers/test/serviceworkers/fetch/origin/https/register.html
rename to dom/serviceworkers/test/fetch/origin/https/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/origin/https/unregister.html b/dom/serviceworkers/test/fetch/origin/https/unregister.html
rename from dom/workers/test/serviceworkers/fetch/origin/https/unregister.html
rename to dom/serviceworkers/test/fetch/origin/https/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/origin/index-to-https.sjs b/dom/serviceworkers/test/fetch/origin/index-to-https.sjs
rename from dom/workers/test/serviceworkers/fetch/origin/index-to-https.sjs
rename to dom/serviceworkers/test/fetch/origin/index-to-https.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/origin/index.sjs b/dom/serviceworkers/test/fetch/origin/index.sjs
rename from dom/workers/test/serviceworkers/fetch/origin/index.sjs
rename to dom/serviceworkers/test/fetch/origin/index.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/origin/origin_test.js b/dom/serviceworkers/test/fetch/origin/origin_test.js
rename from dom/workers/test/serviceworkers/fetch/origin/origin_test.js
rename to dom/serviceworkers/test/fetch/origin/origin_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/origin/realindex.html b/dom/serviceworkers/test/fetch/origin/realindex.html
rename from dom/workers/test/serviceworkers/fetch/origin/realindex.html
rename to dom/serviceworkers/test/fetch/origin/realindex.html
diff --git a/dom/workers/test/serviceworkers/fetch/origin/realindex.html^headers^ b/dom/serviceworkers/test/fetch/origin/realindex.html^headers^
rename from dom/workers/test/serviceworkers/fetch/origin/realindex.html^headers^
rename to dom/serviceworkers/test/fetch/origin/realindex.html^headers^
diff --git a/dom/workers/test/serviceworkers/fetch/origin/register.html b/dom/serviceworkers/test/fetch/origin/register.html
rename from dom/workers/test/serviceworkers/fetch/origin/register.html
rename to dom/serviceworkers/test/fetch/origin/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/origin/unregister.html b/dom/serviceworkers/test/fetch/origin/unregister.html
rename from dom/workers/test/serviceworkers/fetch/origin/unregister.html
rename to dom/serviceworkers/test/fetch/origin/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/plugin/plugins.html b/dom/serviceworkers/test/fetch/plugin/plugins.html
rename from dom/workers/test/serviceworkers/fetch/plugin/plugins.html
rename to dom/serviceworkers/test/fetch/plugin/plugins.html
diff --git a/dom/workers/test/serviceworkers/fetch/plugin/worker.js b/dom/serviceworkers/test/fetch/plugin/worker.js
rename from dom/workers/test/serviceworkers/fetch/plugin/worker.js
rename to dom/serviceworkers/test/fetch/plugin/worker.js
diff --git a/dom/workers/test/serviceworkers/fetch/real-file.txt b/dom/serviceworkers/test/fetch/real-file.txt
rename from dom/workers/test/serviceworkers/fetch/real-file.txt
rename to dom/serviceworkers/test/fetch/real-file.txt
diff --git a/dom/workers/test/serviceworkers/fetch/redirect.sjs b/dom/serviceworkers/test/fetch/redirect.sjs
rename from dom/workers/test/serviceworkers/fetch/redirect.sjs
rename to dom/serviceworkers/test/fetch/redirect.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/index.html b/dom/serviceworkers/test/fetch/requesturl/index.html
rename from dom/workers/test/serviceworkers/fetch/requesturl/index.html
rename to dom/serviceworkers/test/fetch/requesturl/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/redirect.sjs b/dom/serviceworkers/test/fetch/requesturl/redirect.sjs
rename from dom/workers/test/serviceworkers/fetch/requesturl/redirect.sjs
rename to dom/serviceworkers/test/fetch/requesturl/redirect.sjs
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/redirector.html b/dom/serviceworkers/test/fetch/requesturl/redirector.html
rename from dom/workers/test/serviceworkers/fetch/requesturl/redirector.html
rename to dom/serviceworkers/test/fetch/requesturl/redirector.html
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/register.html b/dom/serviceworkers/test/fetch/requesturl/register.html
rename from dom/workers/test/serviceworkers/fetch/requesturl/register.html
rename to dom/serviceworkers/test/fetch/requesturl/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/requesturl_test.js b/dom/serviceworkers/test/fetch/requesturl/requesturl_test.js
rename from dom/workers/test/serviceworkers/fetch/requesturl/requesturl_test.js
rename to dom/serviceworkers/test/fetch/requesturl/requesturl_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/secret.html b/dom/serviceworkers/test/fetch/requesturl/secret.html
rename from dom/workers/test/serviceworkers/fetch/requesturl/secret.html
rename to dom/serviceworkers/test/fetch/requesturl/secret.html
diff --git a/dom/workers/test/serviceworkers/fetch/requesturl/unregister.html b/dom/serviceworkers/test/fetch/requesturl/unregister.html
rename from dom/workers/test/serviceworkers/fetch/requesturl/unregister.html
rename to dom/serviceworkers/test/fetch/requesturl/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/sandbox/index.html b/dom/serviceworkers/test/fetch/sandbox/index.html
rename from dom/workers/test/serviceworkers/fetch/sandbox/index.html
rename to dom/serviceworkers/test/fetch/sandbox/index.html
diff --git a/dom/workers/test/serviceworkers/fetch/sandbox/intercepted_index.html b/dom/serviceworkers/test/fetch/sandbox/intercepted_index.html
rename from dom/workers/test/serviceworkers/fetch/sandbox/intercepted_index.html
rename to dom/serviceworkers/test/fetch/sandbox/intercepted_index.html
diff --git a/dom/workers/test/serviceworkers/fetch/sandbox/register.html b/dom/serviceworkers/test/fetch/sandbox/register.html
rename from dom/workers/test/serviceworkers/fetch/sandbox/register.html
rename to dom/serviceworkers/test/fetch/sandbox/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/sandbox/sandbox_test.js b/dom/serviceworkers/test/fetch/sandbox/sandbox_test.js
rename from dom/workers/test/serviceworkers/fetch/sandbox/sandbox_test.js
rename to dom/serviceworkers/test/fetch/sandbox/sandbox_test.js
diff --git a/dom/workers/test/serviceworkers/fetch/sandbox/unregister.html b/dom/serviceworkers/test/fetch/sandbox/unregister.html
rename from dom/workers/test/serviceworkers/fetch/sandbox/unregister.html
rename to dom/serviceworkers/test/fetch/sandbox/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/embedder.html b/dom/serviceworkers/test/fetch/upgrade-insecure/embedder.html
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/embedder.html
rename to dom/serviceworkers/test/fetch/upgrade-insecure/embedder.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/embedder.html^headers^ b/dom/serviceworkers/test/fetch/upgrade-insecure/embedder.html^headers^
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/embedder.html^headers^
rename to dom/serviceworkers/test/fetch/upgrade-insecure/embedder.html^headers^
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/image-20px.png b/dom/serviceworkers/test/fetch/upgrade-insecure/image-20px.png
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/image-20px.png
rename to dom/serviceworkers/test/fetch/upgrade-insecure/image-20px.png
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/image-40px.png b/dom/serviceworkers/test/fetch/upgrade-insecure/image-40px.png
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/image-40px.png
rename to dom/serviceworkers/test/fetch/upgrade-insecure/image-40px.png
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/image.html b/dom/serviceworkers/test/fetch/upgrade-insecure/image.html
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/image.html
rename to dom/serviceworkers/test/fetch/upgrade-insecure/image.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/realindex.html b/dom/serviceworkers/test/fetch/upgrade-insecure/realindex.html
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/realindex.html
rename to dom/serviceworkers/test/fetch/upgrade-insecure/realindex.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/register.html b/dom/serviceworkers/test/fetch/upgrade-insecure/register.html
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/register.html
rename to dom/serviceworkers/test/fetch/upgrade-insecure/register.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/unregister.html b/dom/serviceworkers/test/fetch/upgrade-insecure/unregister.html
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/unregister.html
rename to dom/serviceworkers/test/fetch/upgrade-insecure/unregister.html
diff --git a/dom/workers/test/serviceworkers/fetch/upgrade-insecure/upgrade-insecure_test.js b/dom/serviceworkers/test/fetch/upgrade-insecure/upgrade-insecure_test.js
rename from dom/workers/test/serviceworkers/fetch/upgrade-insecure/upgrade-insecure_test.js
rename to dom/serviceworkers/test/fetch/upgrade-insecure/upgrade-insecure_test.js
diff --git a/dom/workers/test/serviceworkers/fetch_event_worker.js b/dom/serviceworkers/test/fetch_event_worker.js
rename from dom/workers/test/serviceworkers/fetch_event_worker.js
rename to dom/serviceworkers/test/fetch_event_worker.js
diff --git a/dom/workers/test/serviceworkers/file_blob_response_worker.js b/dom/serviceworkers/test/file_blob_response_worker.js
rename from dom/workers/test/serviceworkers/file_blob_response_worker.js
rename to dom/serviceworkers/test/file_blob_response_worker.js
diff --git a/dom/workers/test/serviceworkers/file_js_cache.html b/dom/serviceworkers/test/file_js_cache.html
rename from dom/workers/test/serviceworkers/file_js_cache.html
rename to dom/serviceworkers/test/file_js_cache.html
diff --git a/dom/workers/test/serviceworkers/file_js_cache.js b/dom/serviceworkers/test/file_js_cache.js
rename from dom/workers/test/serviceworkers/file_js_cache.js
rename to dom/serviceworkers/test/file_js_cache.js
diff --git a/dom/workers/test/serviceworkers/file_js_cache_cleanup.js b/dom/serviceworkers/test/file_js_cache_cleanup.js
rename from dom/workers/test/serviceworkers/file_js_cache_cleanup.js
rename to dom/serviceworkers/test/file_js_cache_cleanup.js
diff --git a/dom/workers/test/serviceworkers/file_js_cache_save_after_load.html b/dom/serviceworkers/test/file_js_cache_save_after_load.html
rename from dom/workers/test/serviceworkers/file_js_cache_save_after_load.html
rename to dom/serviceworkers/test/file_js_cache_save_after_load.html
diff --git a/dom/workers/test/serviceworkers/file_js_cache_save_after_load.js b/dom/serviceworkers/test/file_js_cache_save_after_load.js
rename from dom/workers/test/serviceworkers/file_js_cache_save_after_load.js
rename to dom/serviceworkers/test/file_js_cache_save_after_load.js
diff --git a/dom/workers/test/serviceworkers/file_js_cache_syntax_error.html b/dom/serviceworkers/test/file_js_cache_syntax_error.html
rename from dom/workers/test/serviceworkers/file_js_cache_syntax_error.html
rename to dom/serviceworkers/test/file_js_cache_syntax_error.html
diff --git a/dom/workers/test/serviceworkers/file_js_cache_syntax_error.js b/dom/serviceworkers/test/file_js_cache_syntax_error.js
rename from dom/workers/test/serviceworkers/file_js_cache_syntax_error.js
rename to dom/serviceworkers/test/file_js_cache_syntax_error.js
diff --git a/dom/workers/test/serviceworkers/file_js_cache_with_sri.html b/dom/serviceworkers/test/file_js_cache_with_sri.html
rename from dom/workers/test/serviceworkers/file_js_cache_with_sri.html
rename to dom/serviceworkers/test/file_js_cache_with_sri.html
diff --git a/dom/workers/test/serviceworkers/file_userContextId_openWindow.js b/dom/serviceworkers/test/file_userContextId_openWindow.js
rename from dom/workers/test/serviceworkers/file_userContextId_openWindow.js
rename to dom/serviceworkers/test/file_userContextId_openWindow.js
diff --git a/dom/workers/test/serviceworkers/force_refresh_browser_worker.js b/dom/serviceworkers/test/force_refresh_browser_worker.js
rename from dom/workers/test/serviceworkers/force_refresh_browser_worker.js
rename to dom/serviceworkers/test/force_refresh_browser_worker.js
diff --git a/dom/workers/test/serviceworkers/force_refresh_worker.js b/dom/serviceworkers/test/force_refresh_worker.js
rename from dom/workers/test/serviceworkers/force_refresh_worker.js
rename to dom/serviceworkers/test/force_refresh_worker.js
diff --git a/dom/workers/test/serviceworkers/gzip_redirect_worker.js b/dom/serviceworkers/test/gzip_redirect_worker.js
rename from dom/workers/test/serviceworkers/gzip_redirect_worker.js
rename to dom/serviceworkers/test/gzip_redirect_worker.js
diff --git a/dom/workers/test/serviceworkers/header_checker.sjs b/dom/serviceworkers/test/header_checker.sjs
rename from dom/workers/test/serviceworkers/header_checker.sjs
rename to dom/serviceworkers/test/header_checker.sjs
diff --git a/dom/workers/test/serviceworkers/hello.html b/dom/serviceworkers/test/hello.html
rename from dom/workers/test/serviceworkers/hello.html
rename to dom/serviceworkers/test/hello.html
diff --git a/dom/workers/test/serviceworkers/importscript.sjs b/dom/serviceworkers/test/importscript.sjs
rename from dom/workers/test/serviceworkers/importscript.sjs
rename to dom/serviceworkers/test/importscript.sjs
diff --git a/dom/workers/test/serviceworkers/importscript_worker.js b/dom/serviceworkers/test/importscript_worker.js
rename from dom/workers/test/serviceworkers/importscript_worker.js
rename to dom/serviceworkers/test/importscript_worker.js
diff --git a/dom/workers/test/serviceworkers/install_event_error_worker.js b/dom/serviceworkers/test/install_event_error_worker.js
rename from dom/workers/test/serviceworkers/install_event_error_worker.js
rename to dom/serviceworkers/test/install_event_error_worker.js
diff --git a/dom/workers/test/serviceworkers/install_event_worker.js b/dom/serviceworkers/test/install_event_worker.js
rename from dom/workers/test/serviceworkers/install_event_worker.js
rename to dom/serviceworkers/test/install_event_worker.js
diff --git a/dom/workers/test/serviceworkers/isolated/README.md b/dom/serviceworkers/test/isolated/README.md
rename from dom/workers/test/serviceworkers/isolated/README.md
rename to dom/serviceworkers/test/isolated/README.md
diff --git a/dom/workers/test/serviceworkers/isolated/multi-e10s-update/browser.ini b/dom/serviceworkers/test/isolated/multi-e10s-update/browser.ini
rename from dom/workers/test/serviceworkers/isolated/multi-e10s-update/browser.ini
rename to dom/serviceworkers/test/isolated/multi-e10s-update/browser.ini
diff --git a/dom/workers/test/serviceworkers/isolated/multi-e10s-update/browser_multie10s_update.js b/dom/serviceworkers/test/isolated/multi-e10s-update/browser_multie10s_update.js
rename from dom/workers/test/serviceworkers/isolated/multi-e10s-update/browser_multie10s_update.js
rename to dom/serviceworkers/test/isolated/multi-e10s-update/browser_multie10s_update.js
diff --git a/dom/workers/test/serviceworkers/isolated/multi-e10s-update/file_multie10s_update.html b/dom/serviceworkers/test/isolated/multi-e10s-update/file_multie10s_update.html
rename from dom/workers/test/serviceworkers/isolated/multi-e10s-update/file_multie10s_update.html
rename to dom/serviceworkers/test/isolated/multi-e10s-update/file_multie10s_update.html
diff --git a/dom/workers/test/serviceworkers/isolated/multi-e10s-update/server_multie10s_update.sjs b/dom/serviceworkers/test/isolated/multi-e10s-update/server_multie10s_update.sjs
rename from dom/workers/test/serviceworkers/isolated/multi-e10s-update/server_multie10s_update.sjs
rename to dom/serviceworkers/test/isolated/multi-e10s-update/server_multie10s_update.sjs
diff --git a/dom/workers/test/serviceworkers/lazy_worker.js b/dom/serviceworkers/test/lazy_worker.js
rename from dom/workers/test/serviceworkers/lazy_worker.js
rename to dom/serviceworkers/test/lazy_worker.js
diff --git a/dom/workers/test/serviceworkers/lorem_script.js b/dom/serviceworkers/test/lorem_script.js
rename from dom/workers/test/serviceworkers/lorem_script.js
rename to dom/serviceworkers/test/lorem_script.js
diff --git a/dom/workers/test/serviceworkers/match_all_advanced_worker.js b/dom/serviceworkers/test/match_all_advanced_worker.js
rename from dom/workers/test/serviceworkers/match_all_advanced_worker.js
rename to dom/serviceworkers/test/match_all_advanced_worker.js
diff --git a/dom/workers/test/serviceworkers/match_all_client/match_all_client_id.html b/dom/serviceworkers/test/match_all_client/match_all_client_id.html
rename from dom/workers/test/serviceworkers/match_all_client/match_all_client_id.html
rename to dom/serviceworkers/test/match_all_client/match_all_client_id.html
diff --git a/dom/workers/test/serviceworkers/match_all_client_id_worker.js b/dom/serviceworkers/test/match_all_client_id_worker.js
rename from dom/workers/test/serviceworkers/match_all_client_id_worker.js
rename to dom/serviceworkers/test/match_all_client_id_worker.js
diff --git a/dom/workers/test/serviceworkers/match_all_clients/match_all_controlled.html b/dom/serviceworkers/test/match_all_clients/match_all_controlled.html
rename from dom/workers/test/serviceworkers/match_all_clients/match_all_controlled.html
rename to dom/serviceworkers/test/match_all_clients/match_all_controlled.html
diff --git a/dom/workers/test/serviceworkers/match_all_properties_worker.js b/dom/serviceworkers/test/match_all_properties_worker.js
rename from dom/workers/test/serviceworkers/match_all_properties_worker.js
rename to dom/serviceworkers/test/match_all_properties_worker.js
diff --git a/dom/workers/test/serviceworkers/match_all_worker.js b/dom/serviceworkers/test/match_all_worker.js
rename from dom/workers/test/serviceworkers/match_all_worker.js
rename to dom/serviceworkers/test/match_all_worker.js
diff --git a/dom/workers/test/serviceworkers/message_posting_worker.js b/dom/serviceworkers/test/message_posting_worker.js
rename from dom/workers/test/serviceworkers/message_posting_worker.js
rename to dom/serviceworkers/test/message_posting_worker.js
diff --git a/dom/workers/test/serviceworkers/message_receiver.html b/dom/serviceworkers/test/message_receiver.html
rename from dom/workers/test/serviceworkers/message_receiver.html
rename to dom/serviceworkers/test/message_receiver.html
diff --git a/dom/workers/test/serviceworkers/mochitest.ini b/dom/serviceworkers/test/mochitest.ini
rename from dom/workers/test/serviceworkers/mochitest.ini
rename to dom/serviceworkers/test/mochitest.ini
diff --git a/dom/workers/test/serviceworkers/nofetch_handler_worker.js b/dom/serviceworkers/test/nofetch_handler_worker.js
rename from dom/workers/test/serviceworkers/nofetch_handler_worker.js
rename to dom/serviceworkers/test/nofetch_handler_worker.js
diff --git a/dom/workers/test/serviceworkers/notification/listener.html b/dom/serviceworkers/test/notification/listener.html
rename from dom/workers/test/serviceworkers/notification/listener.html
rename to dom/serviceworkers/test/notification/listener.html
diff --git a/dom/workers/test/serviceworkers/notification/register.html b/dom/serviceworkers/test/notification/register.html
rename from dom/workers/test/serviceworkers/notification/register.html
rename to dom/serviceworkers/test/notification/register.html
diff --git a/dom/workers/test/serviceworkers/notification/unregister.html b/dom/serviceworkers/test/notification/unregister.html
rename from dom/workers/test/serviceworkers/notification/unregister.html
rename to dom/serviceworkers/test/notification/unregister.html
diff --git a/dom/workers/test/serviceworkers/notification_alt/register.html b/dom/serviceworkers/test/notification_alt/register.html
rename from dom/workers/test/serviceworkers/notification_alt/register.html
rename to dom/serviceworkers/test/notification_alt/register.html
diff --git a/dom/workers/test/serviceworkers/notification_alt/unregister.html b/dom/serviceworkers/test/notification_alt/unregister.html
rename from dom/workers/test/serviceworkers/notification_alt/unregister.html
rename to dom/serviceworkers/test/notification_alt/unregister.html
diff --git a/dom/workers/test/serviceworkers/notification_constructor_error.js b/dom/serviceworkers/test/notification_constructor_error.js
rename from dom/workers/test/serviceworkers/notification_constructor_error.js
rename to dom/serviceworkers/test/notification_constructor_error.js
diff --git a/dom/workers/test/serviceworkers/notification_get_sw.js b/dom/serviceworkers/test/notification_get_sw.js
rename from dom/workers/test/serviceworkers/notification_get_sw.js
rename to dom/serviceworkers/test/notification_get_sw.js
diff --git a/dom/workers/test/serviceworkers/notificationclick-otherwindow.html b/dom/serviceworkers/test/notificationclick-otherwindow.html
rename from dom/workers/test/serviceworkers/notificationclick-otherwindow.html
rename to dom/serviceworkers/test/notificationclick-otherwindow.html
diff --git a/dom/workers/test/serviceworkers/notificationclick.html b/dom/serviceworkers/test/notificationclick.html
rename from dom/workers/test/serviceworkers/notificationclick.html
rename to dom/serviceworkers/test/notificationclick.html
diff --git a/dom/workers/test/serviceworkers/notificationclick.js b/dom/serviceworkers/test/notificationclick.js
rename from dom/workers/test/serviceworkers/notificationclick.js
rename to dom/serviceworkers/test/notificationclick.js
diff --git a/dom/workers/test/serviceworkers/notificationclick_focus.html b/dom/serviceworkers/test/notificationclick_focus.html
rename from dom/workers/test/serviceworkers/notificationclick_focus.html
rename to dom/serviceworkers/test/notificationclick_focus.html
diff --git a/dom/workers/test/serviceworkers/notificationclick_focus.js b/dom/serviceworkers/test/notificationclick_focus.js
rename from dom/workers/test/serviceworkers/notificationclick_focus.js
rename to dom/serviceworkers/test/notificationclick_focus.js
diff --git a/dom/workers/test/serviceworkers/notificationclose.html b/dom/serviceworkers/test/notificationclose.html
rename from dom/workers/test/serviceworkers/notificationclose.html
rename to dom/serviceworkers/test/notificationclose.html
diff --git a/dom/workers/test/serviceworkers/notificationclose.js b/dom/serviceworkers/test/notificationclose.js
rename from dom/workers/test/serviceworkers/notificationclose.js
rename to dom/serviceworkers/test/notificationclose.js
diff --git a/dom/workers/test/serviceworkers/notify_loaded.js b/dom/serviceworkers/test/notify_loaded.js
rename from dom/workers/test/serviceworkers/notify_loaded.js
rename to dom/serviceworkers/test/notify_loaded.js
diff --git a/dom/workers/test/serviceworkers/opaque_intercept_worker.js b/dom/serviceworkers/test/opaque_intercept_worker.js
rename from dom/workers/test/serviceworkers/opaque_intercept_worker.js
rename to dom/serviceworkers/test/opaque_intercept_worker.js
diff --git a/dom/workers/test/serviceworkers/openWindow_worker.js b/dom/serviceworkers/test/openWindow_worker.js
rename from dom/workers/test/serviceworkers/openWindow_worker.js
rename to dom/serviceworkers/test/openWindow_worker.js
diff --git a/dom/workers/test/serviceworkers/open_window/client.html b/dom/serviceworkers/test/open_window/client.html
rename from dom/workers/test/serviceworkers/open_window/client.html
rename to dom/serviceworkers/test/open_window/client.html
diff --git a/dom/workers/test/serviceworkers/parse_error_worker.js b/dom/serviceworkers/test/parse_error_worker.js
rename from dom/workers/test/serviceworkers/parse_error_worker.js
rename to dom/serviceworkers/test/parse_error_worker.js
diff --git a/dom/workers/test/serviceworkers/redirect.sjs b/dom/serviceworkers/test/redirect.sjs
rename from dom/workers/test/serviceworkers/redirect.sjs
rename to dom/serviceworkers/test/redirect.sjs
diff --git a/dom/workers/test/serviceworkers/redirect_post.sjs b/dom/serviceworkers/test/redirect_post.sjs
rename from dom/workers/test/serviceworkers/redirect_post.sjs
rename to dom/serviceworkers/test/redirect_post.sjs
diff --git a/dom/workers/test/serviceworkers/redirect_serviceworker.sjs b/dom/serviceworkers/test/redirect_serviceworker.sjs
rename from dom/workers/test/serviceworkers/redirect_serviceworker.sjs
rename to dom/serviceworkers/test/redirect_serviceworker.sjs
diff --git a/dom/workers/test/serviceworkers/register_https.html b/dom/serviceworkers/test/register_https.html
rename from dom/workers/test/serviceworkers/register_https.html
rename to dom/serviceworkers/test/register_https.html
diff --git a/dom/workers/test/serviceworkers/sanitize/example_check_and_unregister.html b/dom/serviceworkers/test/sanitize/example_check_and_unregister.html
rename from dom/workers/test/serviceworkers/sanitize/example_check_and_unregister.html
rename to dom/serviceworkers/test/sanitize/example_check_and_unregister.html
diff --git a/dom/workers/test/serviceworkers/sanitize/frame.html b/dom/serviceworkers/test/sanitize/frame.html
rename from dom/workers/test/serviceworkers/sanitize/frame.html
rename to dom/serviceworkers/test/sanitize/frame.html
diff --git a/dom/workers/test/serviceworkers/sanitize/register.html b/dom/serviceworkers/test/sanitize/register.html
rename from dom/workers/test/serviceworkers/sanitize/register.html
rename to dom/serviceworkers/test/sanitize/register.html
diff --git a/dom/workers/test/serviceworkers/sanitize_worker.js b/dom/serviceworkers/test/sanitize_worker.js
rename from dom/workers/test/serviceworkers/sanitize_worker.js
rename to dom/serviceworkers/test/sanitize_worker.js
diff --git a/dom/workers/test/serviceworkers/scope/scope_worker.js b/dom/serviceworkers/test/scope/scope_worker.js
rename from dom/workers/test/serviceworkers/scope/scope_worker.js
rename to dom/serviceworkers/test/scope/scope_worker.js
diff --git a/dom/workers/test/serviceworkers/script_file_upload.js b/dom/serviceworkers/test/script_file_upload.js
rename from dom/workers/test/serviceworkers/script_file_upload.js
rename to dom/serviceworkers/test/script_file_upload.js
diff --git a/dom/workers/test/serviceworkers/server_file_upload.sjs b/dom/serviceworkers/test/server_file_upload.sjs
rename from dom/workers/test/serviceworkers/server_file_upload.sjs
rename to dom/serviceworkers/test/server_file_upload.sjs
diff --git a/dom/workers/test/serviceworkers/service_worker.js b/dom/serviceworkers/test/service_worker.js
rename from dom/workers/test/serviceworkers/service_worker.js
rename to dom/serviceworkers/test/service_worker.js
diff --git a/dom/workers/test/serviceworkers/service_worker_client.html b/dom/serviceworkers/test/service_worker_client.html
rename from dom/workers/test/serviceworkers/service_worker_client.html
rename to dom/serviceworkers/test/service_worker_client.html
diff --git a/dom/workers/test/serviceworkers/serviceworker.html b/dom/serviceworkers/test/serviceworker.html
rename from dom/workers/test/serviceworkers/serviceworker.html
rename to dom/serviceworkers/test/serviceworker.html
diff --git a/dom/workers/test/serviceworkers/serviceworker_not_sharedworker.js b/dom/serviceworkers/test/serviceworker_not_sharedworker.js
rename from dom/workers/test/serviceworkers/serviceworker_not_sharedworker.js
rename to dom/serviceworkers/test/serviceworker_not_sharedworker.js
diff --git a/dom/workers/test/serviceworkers/serviceworker_wrapper.js b/dom/serviceworkers/test/serviceworker_wrapper.js
rename from dom/workers/test/serviceworkers/serviceworker_wrapper.js
rename to dom/serviceworkers/test/serviceworker_wrapper.js
diff --git a/dom/workers/test/serviceworkers/serviceworkerinfo_iframe.html b/dom/serviceworkers/test/serviceworkerinfo_iframe.html
rename from dom/workers/test/serviceworkers/serviceworkerinfo_iframe.html
rename to dom/serviceworkers/test/serviceworkerinfo_iframe.html
diff --git a/dom/workers/test/serviceworkers/serviceworkermanager_iframe.html b/dom/serviceworkers/test/serviceworkermanager_iframe.html
rename from dom/workers/test/serviceworkers/serviceworkermanager_iframe.html
rename to dom/serviceworkers/test/serviceworkermanager_iframe.html
diff --git a/dom/workers/test/serviceworkers/serviceworkerregistrationinfo_iframe.html b/dom/serviceworkers/test/serviceworkerregistrationinfo_iframe.html
rename from dom/workers/test/serviceworkers/serviceworkerregistrationinfo_iframe.html
rename to dom/serviceworkers/test/serviceworkerregistrationinfo_iframe.html
diff --git a/dom/workers/test/serviceworkers/sharedWorker_fetch.js b/dom/serviceworkers/test/sharedWorker_fetch.js
rename from dom/workers/test/serviceworkers/sharedWorker_fetch.js
rename to dom/serviceworkers/test/sharedWorker_fetch.js
diff --git a/dom/workers/test/serviceworkers/simpleregister/index.html b/dom/serviceworkers/test/simpleregister/index.html
rename from dom/workers/test/serviceworkers/simpleregister/index.html
rename to dom/serviceworkers/test/simpleregister/index.html
diff --git a/dom/workers/test/serviceworkers/simpleregister/ready.html b/dom/serviceworkers/test/simpleregister/ready.html
rename from dom/workers/test/serviceworkers/simpleregister/ready.html
rename to dom/serviceworkers/test/simpleregister/ready.html
diff --git a/dom/workers/test/serviceworkers/skip_waiting_installed_worker.js b/dom/serviceworkers/test/skip_waiting_installed_worker.js
rename from dom/workers/test/serviceworkers/skip_waiting_installed_worker.js
rename to dom/serviceworkers/test/skip_waiting_installed_worker.js
diff --git a/dom/workers/test/serviceworkers/skip_waiting_scope/index.html b/dom/serviceworkers/test/skip_waiting_scope/index.html
rename from dom/workers/test/serviceworkers/skip_waiting_scope/index.html
rename to dom/serviceworkers/test/skip_waiting_scope/index.html
diff --git a/dom/workers/test/serviceworkers/source_message_posting_worker.js b/dom/serviceworkers/test/source_message_posting_worker.js
rename from dom/workers/test/serviceworkers/source_message_posting_worker.js
rename to dom/serviceworkers/test/source_message_posting_worker.js
diff --git a/dom/workers/test/serviceworkers/strict_mode_warning.js b/dom/serviceworkers/test/strict_mode_warning.js
rename from dom/workers/test/serviceworkers/strict_mode_warning.js
rename to dom/serviceworkers/test/strict_mode_warning.js
diff --git a/dom/workers/test/serviceworkers/sw_bad_mime_type.js b/dom/serviceworkers/test/sw_bad_mime_type.js
rename from dom/workers/test/serviceworkers/sw_bad_mime_type.js
rename to dom/serviceworkers/test/sw_bad_mime_type.js
diff --git a/dom/workers/test/serviceworkers/sw_bad_mime_type.js^headers^ b/dom/serviceworkers/test/sw_bad_mime_type.js^headers^
rename from dom/workers/test/serviceworkers/sw_bad_mime_type.js^headers^
rename to dom/serviceworkers/test/sw_bad_mime_type.js^headers^
diff --git a/dom/workers/test/serviceworkers/sw_clients/file_blob_upload_frame.html b/dom/serviceworkers/test/sw_clients/file_blob_upload_frame.html
rename from dom/workers/test/serviceworkers/sw_clients/file_blob_upload_frame.html
rename to dom/serviceworkers/test/sw_clients/file_blob_upload_frame.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/navigator.html b/dom/serviceworkers/test/sw_clients/navigator.html
rename from dom/workers/test/serviceworkers/sw_clients/navigator.html
rename to dom/serviceworkers/test/sw_clients/navigator.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher.html b/dom/serviceworkers/test/sw_clients/refresher.html
rename from dom/workers/test/serviceworkers/sw_clients/refresher.html
rename to dom/serviceworkers/test/sw_clients/refresher.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher_cached.html b/dom/serviceworkers/test/sw_clients/refresher_cached.html
rename from dom/workers/test/serviceworkers/sw_clients/refresher_cached.html
rename to dom/serviceworkers/test/sw_clients/refresher_cached.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher_cached_compressed.html b/dom/serviceworkers/test/sw_clients/refresher_cached_compressed.html
rename from dom/workers/test/serviceworkers/sw_clients/refresher_cached_compressed.html
rename to dom/serviceworkers/test/sw_clients/refresher_cached_compressed.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher_cached_compressed.html^headers^ b/dom/serviceworkers/test/sw_clients/refresher_cached_compressed.html^headers^
rename from dom/workers/test/serviceworkers/sw_clients/refresher_cached_compressed.html^headers^
rename to dom/serviceworkers/test/sw_clients/refresher_cached_compressed.html^headers^
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher_compressed.html b/dom/serviceworkers/test/sw_clients/refresher_compressed.html
rename from dom/workers/test/serviceworkers/sw_clients/refresher_compressed.html
rename to dom/serviceworkers/test/sw_clients/refresher_compressed.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/refresher_compressed.html^headers^ b/dom/serviceworkers/test/sw_clients/refresher_compressed.html^headers^
rename from dom/workers/test/serviceworkers/sw_clients/refresher_compressed.html^headers^
rename to dom/serviceworkers/test/sw_clients/refresher_compressed.html^headers^
diff --git a/dom/workers/test/serviceworkers/sw_clients/service_worker_controlled.html b/dom/serviceworkers/test/sw_clients/service_worker_controlled.html
rename from dom/workers/test/serviceworkers/sw_clients/service_worker_controlled.html
rename to dom/serviceworkers/test/sw_clients/service_worker_controlled.html
diff --git a/dom/workers/test/serviceworkers/sw_clients/simple.html b/dom/serviceworkers/test/sw_clients/simple.html
rename from dom/workers/test/serviceworkers/sw_clients/simple.html
rename to dom/serviceworkers/test/sw_clients/simple.html
diff --git a/dom/workers/test/serviceworkers/sw_file_upload.js b/dom/serviceworkers/test/sw_file_upload.js
rename from dom/workers/test/serviceworkers/sw_file_upload.js
rename to dom/serviceworkers/test/sw_file_upload.js
diff --git a/dom/workers/test/serviceworkers/sw_storage_not_allow.js b/dom/serviceworkers/test/sw_storage_not_allow.js
rename from dom/workers/test/serviceworkers/sw_storage_not_allow.js
rename to dom/serviceworkers/test/sw_storage_not_allow.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_different.js b/dom/serviceworkers/test/swa/worker_scope_different.js
rename from dom/workers/test/serviceworkers/swa/worker_scope_different.js
rename to dom/serviceworkers/test/swa/worker_scope_different.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_different.js^headers^ b/dom/serviceworkers/test/swa/worker_scope_different.js^headers^
rename from dom/workers/test/serviceworkers/swa/worker_scope_different.js^headers^
rename to dom/serviceworkers/test/swa/worker_scope_different.js^headers^
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_different2.js b/dom/serviceworkers/test/swa/worker_scope_different2.js
rename from dom/workers/test/serviceworkers/swa/worker_scope_different2.js
rename to dom/serviceworkers/test/swa/worker_scope_different2.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_different2.js^headers^ b/dom/serviceworkers/test/swa/worker_scope_different2.js^headers^
rename from dom/workers/test/serviceworkers/swa/worker_scope_different2.js^headers^
rename to dom/serviceworkers/test/swa/worker_scope_different2.js^headers^
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_precise.js b/dom/serviceworkers/test/swa/worker_scope_precise.js
rename from dom/workers/test/serviceworkers/swa/worker_scope_precise.js
rename to dom/serviceworkers/test/swa/worker_scope_precise.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_precise.js^headers^ b/dom/serviceworkers/test/swa/worker_scope_precise.js^headers^
rename from dom/workers/test/serviceworkers/swa/worker_scope_precise.js^headers^
rename to dom/serviceworkers/test/swa/worker_scope_precise.js^headers^
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_too_deep.js b/dom/serviceworkers/test/swa/worker_scope_too_deep.js
rename from dom/workers/test/serviceworkers/swa/worker_scope_too_deep.js
rename to dom/serviceworkers/test/swa/worker_scope_too_deep.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_too_deep.js^headers^ b/dom/serviceworkers/test/swa/worker_scope_too_deep.js^headers^
rename from dom/workers/test/serviceworkers/swa/worker_scope_too_deep.js^headers^
rename to dom/serviceworkers/test/swa/worker_scope_too_deep.js^headers^
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_too_narrow.js b/dom/serviceworkers/test/swa/worker_scope_too_narrow.js
rename from dom/workers/test/serviceworkers/swa/worker_scope_too_narrow.js
rename to dom/serviceworkers/test/swa/worker_scope_too_narrow.js
diff --git a/dom/workers/test/serviceworkers/swa/worker_scope_too_narrow.js^headers^ b/dom/serviceworkers/test/swa/worker_scope_too_narrow.js^headers^
rename from dom/workers/test/serviceworkers/swa/worker_scope_too_narrow.js^headers^
rename to dom/serviceworkers/test/swa/worker_scope_too_narrow.js^headers^
diff --git a/dom/workers/test/serviceworkers/test_async_waituntil.html b/dom/serviceworkers/test/test_async_waituntil.html
rename from dom/workers/test/serviceworkers/test_async_waituntil.html
rename to dom/serviceworkers/test/test_async_waituntil.html
diff --git a/dom/workers/test/serviceworkers/test_bad_script_cache.html b/dom/serviceworkers/test/test_bad_script_cache.html
rename from dom/workers/test/serviceworkers/test_bad_script_cache.html
rename to dom/serviceworkers/test/test_bad_script_cache.html
diff --git a/dom/workers/test/serviceworkers/test_bug1151916.html b/dom/serviceworkers/test/test_bug1151916.html
rename from dom/workers/test/serviceworkers/test_bug1151916.html
rename to dom/serviceworkers/test/test_bug1151916.html
diff --git a/dom/workers/test/serviceworkers/test_bug1240436.html b/dom/serviceworkers/test/test_bug1240436.html
rename from dom/workers/test/serviceworkers/test_bug1240436.html
rename to dom/serviceworkers/test/test_bug1240436.html
diff --git a/dom/workers/test/serviceworkers/test_bug1408734.html b/dom/serviceworkers/test/test_bug1408734.html
rename from dom/workers/test/serviceworkers/test_bug1408734.html
rename to dom/serviceworkers/test/test_bug1408734.html
diff --git a/dom/workers/test/serviceworkers/test_claim.html b/dom/serviceworkers/test/test_claim.html
rename from dom/workers/test/serviceworkers/test_claim.html
rename to dom/serviceworkers/test/test_claim.html
diff --git a/dom/workers/test/serviceworkers/test_claim_oninstall.html b/dom/serviceworkers/test/test_claim_oninstall.html
rename from dom/workers/test/serviceworkers/test_claim_oninstall.html
rename to dom/serviceworkers/test/test_claim_oninstall.html
diff --git a/dom/workers/test/serviceworkers/test_client_focus.html b/dom/serviceworkers/test/test_client_focus.html
rename from dom/workers/test/serviceworkers/test_client_focus.html
rename to dom/serviceworkers/test/test_client_focus.html
diff --git a/dom/workers/test/serviceworkers/test_controller.html b/dom/serviceworkers/test/test_controller.html
rename from dom/workers/test/serviceworkers/test_controller.html
rename to dom/serviceworkers/test/test_controller.html
diff --git a/dom/workers/test/serviceworkers/test_cookie_fetch.html b/dom/serviceworkers/test/test_cookie_fetch.html
rename from dom/workers/test/serviceworkers/test_cookie_fetch.html
rename to dom/serviceworkers/test/test_cookie_fetch.html
diff --git a/dom/workers/test/serviceworkers/test_cross_origin_url_after_redirect.html b/dom/serviceworkers/test/test_cross_origin_url_after_redirect.html
rename from dom/workers/test/serviceworkers/test_cross_origin_url_after_redirect.html
rename to dom/serviceworkers/test/test_cross_origin_url_after_redirect.html
diff --git a/dom/workers/test/serviceworkers/test_csp_upgrade-insecure_intercept.html b/dom/serviceworkers/test/test_csp_upgrade-insecure_intercept.html
rename from dom/workers/test/serviceworkers/test_csp_upgrade-insecure_intercept.html
rename to dom/serviceworkers/test/test_csp_upgrade-insecure_intercept.html
diff --git a/dom/workers/test/serviceworkers/test_devtools_bypass_serviceworker.html b/dom/serviceworkers/test/test_devtools_bypass_serviceworker.html
rename from dom/workers/test/serviceworkers/test_devtools_bypass_serviceworker.html
rename to dom/serviceworkers/test/test_devtools_bypass_serviceworker.html
diff --git a/dom/workers/test/serviceworkers/test_devtools_track_serviceworker_time.html b/dom/serviceworkers/test/test_devtools_track_serviceworker_time.html
rename from dom/workers/test/serviceworkers/test_devtools_track_serviceworker_time.html
rename to dom/serviceworkers/test/test_devtools_track_serviceworker_time.html
diff --git a/dom/workers/test/serviceworkers/test_empty_serviceworker.html b/dom/serviceworkers/test/test_empty_serviceworker.html
rename from dom/workers/test/serviceworkers/test_empty_serviceworker.html
rename to dom/serviceworkers/test/test_empty_serviceworker.html
diff --git a/dom/workers/test/serviceworkers/test_error_reporting.html b/dom/serviceworkers/test/test_error_reporting.html
rename from dom/workers/test/serviceworkers/test_error_reporting.html
rename to dom/serviceworkers/test/test_error_reporting.html
diff --git a/dom/workers/test/serviceworkers/test_escapedSlashes.html b/dom/serviceworkers/test/test_escapedSlashes.html
rename from dom/workers/test/serviceworkers/test_escapedSlashes.html
rename to dom/serviceworkers/test/test_escapedSlashes.html
diff --git a/dom/workers/test/serviceworkers/test_eval_allowed.html b/dom/serviceworkers/test/test_eval_allowed.html
rename from dom/workers/test/serviceworkers/test_eval_allowed.html
rename to dom/serviceworkers/test/test_eval_allowed.html
diff --git a/dom/workers/test/serviceworkers/test_eval_allowed.html^headers^ b/dom/serviceworkers/test/test_eval_allowed.html^headers^
rename from dom/workers/test/serviceworkers/test_eval_allowed.html^headers^
rename to dom/serviceworkers/test/test_eval_allowed.html^headers^
diff --git a/dom/workers/test/serviceworkers/test_eventsource_intercept.html b/dom/serviceworkers/test/test_eventsource_intercept.html
rename from dom/workers/test/serviceworkers/test_eventsource_intercept.html
rename to dom/serviceworkers/test/test_eventsource_intercept.html
diff --git a/dom/workers/test/serviceworkers/test_fetch_event.html b/dom/serviceworkers/test/test_fetch_event.html
rename from dom/workers/test/serviceworkers/test_fetch_event.html
rename to dom/serviceworkers/test/test_fetch_event.html
diff --git a/dom/workers/test/serviceworkers/test_fetch_event_with_thirdpartypref.html b/dom/serviceworkers/test/test_fetch_event_with_thirdpartypref.html
rename from dom/workers/test/serviceworkers/test_fetch_event_with_thirdpartypref.html
rename to dom/serviceworkers/test/test_fetch_event_with_thirdpartypref.html
diff --git a/dom/workers/test/serviceworkers/test_fetch_integrity.html b/dom/serviceworkers/test/test_fetch_integrity.html
rename from dom/workers/test/serviceworkers/test_fetch_integrity.html
rename to dom/serviceworkers/test/test_fetch_integrity.html
diff --git a/dom/workers/test/serviceworkers/test_file_blob_response.html b/dom/serviceworkers/test/test_file_blob_response.html
rename from dom/workers/test/serviceworkers/test_file_blob_response.html
rename to dom/serviceworkers/test/test_file_blob_response.html
diff --git a/dom/workers/test/serviceworkers/test_file_blob_upload.html b/dom/serviceworkers/test/test_file_blob_upload.html
rename from dom/workers/test/serviceworkers/test_file_blob_upload.html
rename to dom/serviceworkers/test/test_file_blob_upload.html
diff --git a/dom/workers/test/serviceworkers/test_file_upload.html b/dom/serviceworkers/test/test_file_upload.html
rename from dom/workers/test/serviceworkers/test_file_upload.html
rename to dom/serviceworkers/test/test_file_upload.html
diff --git a/dom/workers/test/serviceworkers/test_force_refresh.html b/dom/serviceworkers/test/test_force_refresh.html
rename from dom/workers/test/serviceworkers/test_force_refresh.html
rename to dom/serviceworkers/test/test_force_refresh.html
diff --git a/dom/workers/test/serviceworkers/test_gzip_redirect.html b/dom/serviceworkers/test/test_gzip_redirect.html
rename from dom/workers/test/serviceworkers/test_gzip_redirect.html
rename to dom/serviceworkers/test/test_gzip_redirect.html
diff --git a/dom/workers/test/serviceworkers/test_hsts_upgrade_intercept.html b/dom/serviceworkers/test/test_hsts_upgrade_intercept.html
rename from dom/workers/test/serviceworkers/test_hsts_upgrade_intercept.html
rename to dom/serviceworkers/test/test_hsts_upgrade_intercept.html
diff --git a/dom/workers/test/serviceworkers/test_https_fetch.html b/dom/serviceworkers/test/test_https_fetch.html
rename from dom/workers/test/serviceworkers/test_https_fetch.html
rename to dom/serviceworkers/test/test_https_fetch.html
diff --git a/dom/workers/test/serviceworkers/test_https_fetch_cloned_response.html b/dom/serviceworkers/test/test_https_fetch_cloned_response.html
rename from dom/workers/test/serviceworkers/test_https_fetch_cloned_response.html
rename to dom/serviceworkers/test/test_https_fetch_cloned_response.html
diff --git a/dom/workers/test/serviceworkers/test_https_origin_after_redirect.html b/dom/serviceworkers/test/test_https_origin_after_redirect.html
rename from dom/workers/test/serviceworkers/test_https_origin_after_redirect.html
rename to dom/serviceworkers/test/test_https_origin_after_redirect.html
diff --git a/dom/workers/test/serviceworkers/test_https_origin_after_redirect_cached.html b/dom/serviceworkers/test/test_https_origin_after_redirect_cached.html
rename from dom/workers/test/serviceworkers/test_https_origin_after_redirect_cached.html
rename to dom/serviceworkers/test/test_https_origin_after_redirect_cached.html
diff --git a/dom/workers/test/serviceworkers/test_https_synth_fetch_from_cached_sw.html b/dom/serviceworkers/test/test_https_synth_fetch_from_cached_sw.html
rename from dom/workers/test/serviceworkers/test_https_synth_fetch_from_cached_sw.html
rename to dom/serviceworkers/test/test_https_synth_fetch_from_cached_sw.html
diff --git a/dom/workers/test/serviceworkers/test_imagecache.html b/dom/serviceworkers/test/test_imagecache.html
rename from dom/workers/test/serviceworkers/test_imagecache.html
rename to dom/serviceworkers/test/test_imagecache.html
diff --git a/dom/workers/test/serviceworkers/test_imagecache_max_age.html b/dom/serviceworkers/test/test_imagecache_max_age.html
rename from dom/workers/test/serviceworkers/test_imagecache_max_age.html
rename to dom/serviceworkers/test/test_imagecache_max_age.html
diff --git a/dom/workers/test/serviceworkers/test_importscript.html b/dom/serviceworkers/test/test_importscript.html
rename from dom/workers/test/serviceworkers/test_importscript.html
rename to dom/serviceworkers/test/test_importscript.html
diff --git a/dom/workers/test/serviceworkers/test_importscript_mixedcontent.html b/dom/serviceworkers/test/test_importscript_mixedcontent.html
rename from dom/workers/test/serviceworkers/test_importscript_mixedcontent.html
rename to dom/serviceworkers/test/test_importscript_mixedcontent.html
diff --git a/dom/workers/test/serviceworkers/test_install_event.html b/dom/serviceworkers/test/test_install_event.html
rename from dom/workers/test/serviceworkers/test_install_event.html
rename to dom/serviceworkers/test/test_install_event.html
diff --git a/dom/workers/test/serviceworkers/test_install_event_gc.html b/dom/serviceworkers/test/test_install_event_gc.html
rename from dom/workers/test/serviceworkers/test_install_event_gc.html
rename to dom/serviceworkers/test/test_install_event_gc.html
diff --git a/dom/workers/test/serviceworkers/test_installation_simple.html b/dom/serviceworkers/test/test_installation_simple.html
rename from dom/workers/test/serviceworkers/test_installation_simple.html
rename to dom/serviceworkers/test/test_installation_simple.html
diff --git a/dom/workers/test/serviceworkers/test_match_all.html b/dom/serviceworkers/test/test_match_all.html
rename from dom/workers/test/serviceworkers/test_match_all.html
rename to dom/serviceworkers/test/test_match_all.html
diff --git a/dom/workers/test/serviceworkers/test_match_all_advanced.html b/dom/serviceworkers/test/test_match_all_advanced.html
rename from dom/workers/test/serviceworkers/test_match_all_advanced.html
rename to dom/serviceworkers/test/test_match_all_advanced.html
diff --git a/dom/workers/test/serviceworkers/test_match_all_client_id.html b/dom/serviceworkers/test/test_match_all_client_id.html
rename from dom/workers/test/serviceworkers/test_match_all_client_id.html
rename to dom/serviceworkers/test/test_match_all_client_id.html
diff --git a/dom/workers/test/serviceworkers/test_match_all_client_properties.html b/dom/serviceworkers/test/test_match_all_client_properties.html
rename from dom/workers/test/serviceworkers/test_match_all_client_properties.html
rename to dom/serviceworkers/test/test_match_all_client_properties.html
diff --git a/dom/workers/test/serviceworkers/test_navigator.html b/dom/serviceworkers/test/test_navigator.html
rename from dom/workers/test/serviceworkers/test_navigator.html
rename to dom/serviceworkers/test/test_navigator.html
diff --git a/dom/workers/test/serviceworkers/test_nofetch_handler.html b/dom/serviceworkers/test/test_nofetch_handler.html
rename from dom/workers/test/serviceworkers/test_nofetch_handler.html
rename to dom/serviceworkers/test/test_nofetch_handler.html
diff --git a/dom/workers/test/serviceworkers/test_not_intercept_plugin.html b/dom/serviceworkers/test/test_not_intercept_plugin.html
rename from dom/workers/test/serviceworkers/test_not_intercept_plugin.html
rename to dom/serviceworkers/test/test_not_intercept_plugin.html
diff --git a/dom/workers/test/serviceworkers/test_notification_constructor_error.html b/dom/serviceworkers/test/test_notification_constructor_error.html
rename from dom/workers/test/serviceworkers/test_notification_constructor_error.html
rename to dom/serviceworkers/test/test_notification_constructor_error.html
diff --git a/dom/workers/test/serviceworkers/test_notification_get.html b/dom/serviceworkers/test/test_notification_get.html
rename from dom/workers/test/serviceworkers/test_notification_get.html
rename to dom/serviceworkers/test/test_notification_get.html
diff --git a/dom/workers/test/serviceworkers/test_notificationclick-otherwindow.html b/dom/serviceworkers/test/test_notificationclick-otherwindow.html
rename from dom/workers/test/serviceworkers/test_notificationclick-otherwindow.html
rename to dom/serviceworkers/test/test_notificationclick-otherwindow.html
diff --git a/dom/workers/test/serviceworkers/test_notificationclick.html b/dom/serviceworkers/test/test_notificationclick.html
rename from dom/workers/test/serviceworkers/test_notificationclick.html
rename to dom/serviceworkers/test/test_notificationclick.html
diff --git a/dom/workers/test/serviceworkers/test_notificationclick_focus.html b/dom/serviceworkers/test/test_notificationclick_focus.html
rename from dom/workers/test/serviceworkers/test_notificationclick_focus.html
rename to dom/serviceworkers/test/test_notificationclick_focus.html
diff --git a/dom/workers/test/serviceworkers/test_notificationclose.html b/dom/serviceworkers/test/test_notificationclose.html
rename from dom/workers/test/serviceworkers/test_notificationclose.html
rename to dom/serviceworkers/test/test_notificationclose.html
diff --git a/dom/workers/test/serviceworkers/test_opaque_intercept.html b/dom/serviceworkers/test/test_opaque_intercept.html
rename from dom/workers/test/serviceworkers/test_opaque_intercept.html
rename to dom/serviceworkers/test/test_opaque_intercept.html
diff --git a/dom/workers/test/serviceworkers/test_openWindow.html b/dom/serviceworkers/test/test_openWindow.html
rename from dom/workers/test/serviceworkers/test_openWindow.html
rename to dom/serviceworkers/test/test_openWindow.html
diff --git a/dom/workers/test/serviceworkers/test_origin_after_redirect.html b/dom/serviceworkers/test/test_origin_after_redirect.html
rename from dom/workers/test/serviceworkers/test_origin_after_redirect.html
rename to dom/serviceworkers/test/test_origin_after_redirect.html
diff --git a/dom/workers/test/serviceworkers/test_origin_after_redirect_cached.html b/dom/serviceworkers/test/test_origin_after_redirect_cached.html
rename from dom/workers/test/serviceworkers/test_origin_after_redirect_cached.html
rename to dom/serviceworkers/test/test_origin_after_redirect_cached.html
diff --git a/dom/workers/test/serviceworkers/test_origin_after_redirect_to_https.html b/dom/serviceworkers/test/test_origin_after_redirect_to_https.html
rename from dom/workers/test/serviceworkers/test_origin_after_redirect_to_https.html
rename to dom/serviceworkers/test/test_origin_after_redirect_to_https.html
diff --git a/dom/workers/test/serviceworkers/test_origin_after_redirect_to_https_cached.html b/dom/serviceworkers/test/test_origin_after_redirect_to_https_cached.html
rename from dom/workers/test/serviceworkers/test_origin_after_redirect_to_https_cached.html
rename to dom/serviceworkers/test/test_origin_after_redirect_to_https_cached.html
diff --git a/dom/workers/test/serviceworkers/test_post_message.html b/dom/serviceworkers/test/test_post_message.html
rename from dom/workers/test/serviceworkers/test_post_message.html
rename to dom/serviceworkers/test/test_post_message.html
diff --git a/dom/workers/test/serviceworkers/test_post_message_advanced.html b/dom/serviceworkers/test/test_post_message_advanced.html
rename from dom/workers/test/serviceworkers/test_post_message_advanced.html
rename to dom/serviceworkers/test/test_post_message_advanced.html
diff --git a/dom/workers/test/serviceworkers/test_post_message_source.html b/dom/serviceworkers/test/test_post_message_source.html
rename from dom/workers/test/serviceworkers/test_post_message_source.html
rename to dom/serviceworkers/test/test_post_message_source.html
diff --git a/dom/workers/test/serviceworkers/test_privateBrowsing.html b/dom/serviceworkers/test/test_privateBrowsing.html
rename from dom/workers/test/serviceworkers/test_privateBrowsing.html
rename to dom/serviceworkers/test/test_privateBrowsing.html
diff --git a/dom/workers/test/serviceworkers/test_register_base.html b/dom/serviceworkers/test/test_register_base.html
rename from dom/workers/test/serviceworkers/test_register_base.html
rename to dom/serviceworkers/test/test_register_base.html
diff --git a/dom/workers/test/serviceworkers/test_register_https_in_http.html b/dom/serviceworkers/test/test_register_https_in_http.html
rename from dom/workers/test/serviceworkers/test_register_https_in_http.html
rename to dom/serviceworkers/test/test_register_https_in_http.html
diff --git a/dom/workers/test/serviceworkers/test_request_context.js b/dom/serviceworkers/test/test_request_context.js
rename from dom/workers/test/serviceworkers/test_request_context.js
rename to dom/serviceworkers/test/test_request_context.js
diff --git a/dom/workers/test/serviceworkers/test_request_context_audio.html b/dom/serviceworkers/test/test_request_context_audio.html
rename from dom/workers/test/serviceworkers/test_request_context_audio.html
rename to dom/serviceworkers/test/test_request_context_audio.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_beacon.html b/dom/serviceworkers/test/test_request_context_beacon.html
rename from dom/workers/test/serviceworkers/test_request_context_beacon.html
rename to dom/serviceworkers/test/test_request_context_beacon.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_cache.html b/dom/serviceworkers/test/test_request_context_cache.html
rename from dom/workers/test/serviceworkers/test_request_context_cache.html
rename to dom/serviceworkers/test/test_request_context_cache.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_cspreport.html b/dom/serviceworkers/test/test_request_context_cspreport.html
rename from dom/workers/test/serviceworkers/test_request_context_cspreport.html
rename to dom/serviceworkers/test/test_request_context_cspreport.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_embed.html b/dom/serviceworkers/test/test_request_context_embed.html
rename from dom/workers/test/serviceworkers/test_request_context_embed.html
rename to dom/serviceworkers/test/test_request_context_embed.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_fetch.html b/dom/serviceworkers/test/test_request_context_fetch.html
rename from dom/workers/test/serviceworkers/test_request_context_fetch.html
rename to dom/serviceworkers/test/test_request_context_fetch.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_font.html b/dom/serviceworkers/test/test_request_context_font.html
rename from dom/workers/test/serviceworkers/test_request_context_font.html
rename to dom/serviceworkers/test/test_request_context_font.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_frame.html b/dom/serviceworkers/test/test_request_context_frame.html
rename from dom/workers/test/serviceworkers/test_request_context_frame.html
rename to dom/serviceworkers/test/test_request_context_frame.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_iframe.html b/dom/serviceworkers/test/test_request_context_iframe.html
rename from dom/workers/test/serviceworkers/test_request_context_iframe.html
rename to dom/serviceworkers/test/test_request_context_iframe.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_image.html b/dom/serviceworkers/test/test_request_context_image.html
rename from dom/workers/test/serviceworkers/test_request_context_image.html
rename to dom/serviceworkers/test/test_request_context_image.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_imagesrcset.html b/dom/serviceworkers/test/test_request_context_imagesrcset.html
rename from dom/workers/test/serviceworkers/test_request_context_imagesrcset.html
rename to dom/serviceworkers/test/test_request_context_imagesrcset.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_internal.html b/dom/serviceworkers/test/test_request_context_internal.html
rename from dom/workers/test/serviceworkers/test_request_context_internal.html
rename to dom/serviceworkers/test/test_request_context_internal.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_nestedworker.html b/dom/serviceworkers/test/test_request_context_nestedworker.html
rename from dom/workers/test/serviceworkers/test_request_context_nestedworker.html
rename to dom/serviceworkers/test/test_request_context_nestedworker.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_nestedworkerinsharedworker.html b/dom/serviceworkers/test/test_request_context_nestedworkerinsharedworker.html
rename from dom/workers/test/serviceworkers/test_request_context_nestedworkerinsharedworker.html
rename to dom/serviceworkers/test/test_request_context_nestedworkerinsharedworker.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_object.html b/dom/serviceworkers/test/test_request_context_object.html
rename from dom/workers/test/serviceworkers/test_request_context_object.html
rename to dom/serviceworkers/test/test_request_context_object.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_picture.html b/dom/serviceworkers/test/test_request_context_picture.html
rename from dom/workers/test/serviceworkers/test_request_context_picture.html
rename to dom/serviceworkers/test/test_request_context_picture.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_ping.html b/dom/serviceworkers/test/test_request_context_ping.html
rename from dom/workers/test/serviceworkers/test_request_context_ping.html
rename to dom/serviceworkers/test/test_request_context_ping.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_plugin.html b/dom/serviceworkers/test/test_request_context_plugin.html
rename from dom/workers/test/serviceworkers/test_request_context_plugin.html
rename to dom/serviceworkers/test/test_request_context_plugin.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_script.html b/dom/serviceworkers/test/test_request_context_script.html
rename from dom/workers/test/serviceworkers/test_request_context_script.html
rename to dom/serviceworkers/test/test_request_context_script.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_sharedworker.html b/dom/serviceworkers/test/test_request_context_sharedworker.html
rename from dom/workers/test/serviceworkers/test_request_context_sharedworker.html
rename to dom/serviceworkers/test/test_request_context_sharedworker.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_style.html b/dom/serviceworkers/test/test_request_context_style.html
rename from dom/workers/test/serviceworkers/test_request_context_style.html
rename to dom/serviceworkers/test/test_request_context_style.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_track.html b/dom/serviceworkers/test/test_request_context_track.html
rename from dom/workers/test/serviceworkers/test_request_context_track.html
rename to dom/serviceworkers/test/test_request_context_track.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_video.html b/dom/serviceworkers/test/test_request_context_video.html
rename from dom/workers/test/serviceworkers/test_request_context_video.html
rename to dom/serviceworkers/test/test_request_context_video.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_worker.html b/dom/serviceworkers/test/test_request_context_worker.html
rename from dom/workers/test/serviceworkers/test_request_context_worker.html
rename to dom/serviceworkers/test/test_request_context_worker.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_xhr.html b/dom/serviceworkers/test/test_request_context_xhr.html
rename from dom/workers/test/serviceworkers/test_request_context_xhr.html
rename to dom/serviceworkers/test/test_request_context_xhr.html
diff --git a/dom/workers/test/serviceworkers/test_request_context_xslt.html b/dom/serviceworkers/test/test_request_context_xslt.html
rename from dom/workers/test/serviceworkers/test_request_context_xslt.html
rename to dom/serviceworkers/test/test_request_context_xslt.html
diff --git a/dom/workers/test/serviceworkers/test_sandbox_intercept.html b/dom/serviceworkers/test/test_sandbox_intercept.html
rename from dom/workers/test/serviceworkers/test_sandbox_intercept.html
rename to dom/serviceworkers/test/test_sandbox_intercept.html
diff --git a/dom/workers/test/serviceworkers/test_sanitize.html b/dom/serviceworkers/test/test_sanitize.html
rename from dom/workers/test/serviceworkers/test_sanitize.html
rename to dom/serviceworkers/test/test_sanitize.html
diff --git a/dom/workers/test/serviceworkers/test_sanitize_domain.html b/dom/serviceworkers/test/test_sanitize_domain.html
rename from dom/workers/test/serviceworkers/test_sanitize_domain.html
rename to dom/serviceworkers/test/test_sanitize_domain.html
diff --git a/dom/workers/test/serviceworkers/test_scopes.html b/dom/serviceworkers/test/test_scopes.html
rename from dom/workers/test/serviceworkers/test_scopes.html
rename to dom/serviceworkers/test/test_scopes.html
diff --git a/dom/workers/test/serviceworkers/test_script_loader_intercepted_js_cache.html b/dom/serviceworkers/test/test_script_loader_intercepted_js_cache.html
rename from dom/workers/test/serviceworkers/test_script_loader_intercepted_js_cache.html
rename to dom/serviceworkers/test/test_script_loader_intercepted_js_cache.html
diff --git a/dom/workers/test/serviceworkers/test_service_worker_allowed.html b/dom/serviceworkers/test/test_service_worker_allowed.html
rename from dom/workers/test/serviceworkers/test_service_worker_allowed.html
rename to dom/serviceworkers/test/test_service_worker_allowed.html
diff --git a/dom/workers/test/serviceworkers/test_serviceworker.html b/dom/serviceworkers/test/test_serviceworker.html
rename from dom/workers/test/serviceworkers/test_serviceworker.html
rename to dom/serviceworkers/test/test_serviceworker.html
diff --git a/dom/workers/test/serviceworkers/test_serviceworker_header.html b/dom/serviceworkers/test/test_serviceworker_header.html
rename from dom/workers/test/serviceworkers/test_serviceworker_header.html
rename to dom/serviceworkers/test/test_serviceworker_header.html
diff --git a/dom/workers/test/serviceworkers/test_serviceworker_interfaces.html b/dom/serviceworkers/test/test_serviceworker_interfaces.html
rename from dom/workers/test/serviceworkers/test_serviceworker_interfaces.html
rename to dom/serviceworkers/test/test_serviceworker_interfaces.html
diff --git a/dom/workers/test/serviceworkers/test_serviceworker_interfaces.js b/dom/serviceworkers/test/test_serviceworker_interfaces.js
rename from dom/workers/test/serviceworkers/test_serviceworker_interfaces.js
rename to dom/serviceworkers/test/test_serviceworker_interfaces.js
diff --git a/dom/workers/test/serviceworkers/test_serviceworker_not_sharedworker.html b/dom/serviceworkers/test/test_serviceworker_not_sharedworker.html
rename from dom/workers/test/serviceworkers/test_serviceworker_not_sharedworker.html
rename to dom/serviceworkers/test/test_serviceworker_not_sharedworker.html
diff --git a/dom/workers/test/serviceworkers/test_serviceworkerinfo.xul b/dom/serviceworkers/test/test_serviceworkerinfo.xul
rename from dom/workers/test/serviceworkers/test_serviceworkerinfo.xul
rename to dom/serviceworkers/test/test_serviceworkerinfo.xul
diff --git a/dom/workers/test/serviceworkers/test_serviceworkermanager.xul b/dom/serviceworkers/test/test_serviceworkermanager.xul
rename from dom/workers/test/serviceworkers/test_serviceworkermanager.xul
rename to dom/serviceworkers/test/test_serviceworkermanager.xul
diff --git a/dom/workers/test/serviceworkers/test_serviceworkerregistrationinfo.xul b/dom/serviceworkers/test/test_serviceworkerregistrationinfo.xul
rename from dom/workers/test/serviceworkers/test_serviceworkerregistrationinfo.xul
rename to dom/serviceworkers/test/test_serviceworkerregistrationinfo.xul
diff --git a/dom/workers/test/serviceworkers/test_skip_waiting.html b/dom/serviceworkers/test/test_skip_waiting.html
rename from dom/workers/test/serviceworkers/test_skip_waiting.html
rename to dom/serviceworkers/test/test_skip_waiting.html
diff --git a/dom/workers/test/serviceworkers/test_strict_mode_warning.html b/dom/serviceworkers/test/test_strict_mode_warning.html
rename from dom/workers/test/serviceworkers/test_strict_mode_warning.html
rename to dom/serviceworkers/test/test_strict_mode_warning.html
diff --git a/dom/workers/test/serviceworkers/test_third_party_iframes.html b/dom/serviceworkers/test/test_third_party_iframes.html
rename from dom/workers/test/serviceworkers/test_third_party_iframes.html
rename to dom/serviceworkers/test/test_third_party_iframes.html
diff --git a/dom/workers/test/serviceworkers/test_unregister.html b/dom/serviceworkers/test/test_unregister.html
rename from dom/workers/test/serviceworkers/test_unregister.html
rename to dom/serviceworkers/test/test_unregister.html
diff --git a/dom/workers/test/serviceworkers/test_unresolved_fetch_interception.html b/dom/serviceworkers/test/test_unresolved_fetch_interception.html
rename from dom/workers/test/serviceworkers/test_unresolved_fetch_interception.html
rename to dom/serviceworkers/test/test_unresolved_fetch_interception.html
diff --git a/dom/workers/test/serviceworkers/test_update_missing_imported_script.html b/dom/serviceworkers/test/test_update_missing_imported_script.html
rename from dom/workers/test/serviceworkers/test_update_missing_imported_script.html
rename to dom/serviceworkers/test/test_update_missing_imported_script.html
diff --git a/dom/workers/test/serviceworkers/test_workerUnregister.html b/dom/serviceworkers/test/test_workerUnregister.html
rename from dom/workers/test/serviceworkers/test_workerUnregister.html
rename to dom/serviceworkers/test/test_workerUnregister.html
diff --git a/dom/workers/test/serviceworkers/test_workerUpdate.html b/dom/serviceworkers/test/test_workerUpdate.html
rename from dom/workers/test/serviceworkers/test_workerUpdate.html
rename to dom/serviceworkers/test/test_workerUpdate.html
diff --git a/dom/workers/test/serviceworkers/test_worker_reference_gc_timeout.html b/dom/serviceworkers/test/test_worker_reference_gc_timeout.html
rename from dom/workers/test/serviceworkers/test_worker_reference_gc_timeout.html
rename to dom/serviceworkers/test/test_worker_reference_gc_timeout.html
diff --git a/dom/workers/test/serviceworkers/test_workerupdatefoundevent.html b/dom/serviceworkers/test/test_workerupdatefoundevent.html
rename from dom/workers/test/serviceworkers/test_workerupdatefoundevent.html
rename to dom/serviceworkers/test/test_workerupdatefoundevent.html
diff --git a/dom/workers/test/serviceworkers/test_xslt.html b/dom/serviceworkers/test/test_xslt.html
rename from dom/workers/test/serviceworkers/test_xslt.html
rename to dom/serviceworkers/test/test_xslt.html
diff --git a/dom/workers/test/serviceworkers/thirdparty/iframe1.html b/dom/serviceworkers/test/thirdparty/iframe1.html
rename from dom/workers/test/serviceworkers/thirdparty/iframe1.html
rename to dom/serviceworkers/test/thirdparty/iframe1.html
diff --git a/dom/workers/test/serviceworkers/thirdparty/iframe2.html b/dom/serviceworkers/test/thirdparty/iframe2.html
rename from dom/workers/test/serviceworkers/thirdparty/iframe2.html
rename to dom/serviceworkers/test/thirdparty/iframe2.html
diff --git a/dom/workers/test/serviceworkers/thirdparty/register.html b/dom/serviceworkers/test/thirdparty/register.html
rename from dom/workers/test/serviceworkers/thirdparty/register.html
rename to dom/serviceworkers/test/thirdparty/register.html
diff --git a/dom/workers/test/serviceworkers/thirdparty/sw.js b/dom/serviceworkers/test/thirdparty/sw.js
rename from dom/workers/test/serviceworkers/thirdparty/sw.js
rename to dom/serviceworkers/test/thirdparty/sw.js
diff --git a/dom/workers/test/serviceworkers/thirdparty/unregister.html b/dom/serviceworkers/test/thirdparty/unregister.html
rename from dom/workers/test/serviceworkers/thirdparty/unregister.html
rename to dom/serviceworkers/test/thirdparty/unregister.html
diff --git a/dom/workers/test/serviceworkers/thirdparty/worker.js b/dom/serviceworkers/test/thirdparty/worker.js
rename from dom/workers/test/serviceworkers/thirdparty/worker.js
rename to dom/serviceworkers/test/thirdparty/worker.js
diff --git a/dom/workers/test/serviceworkers/unregister/index.html b/dom/serviceworkers/test/unregister/index.html
rename from dom/workers/test/serviceworkers/unregister/index.html
rename to dom/serviceworkers/test/unregister/index.html
diff --git a/dom/workers/test/serviceworkers/unregister/unregister.html b/dom/serviceworkers/test/unregister/unregister.html
rename from dom/workers/test/serviceworkers/unregister/unregister.html
rename to dom/serviceworkers/test/unregister/unregister.html
diff --git a/dom/workers/test/serviceworkers/unresolved_fetch_worker.js b/dom/serviceworkers/test/unresolved_fetch_worker.js
rename from dom/workers/test/serviceworkers/unresolved_fetch_worker.js
rename to dom/serviceworkers/test/unresolved_fetch_worker.js
diff --git a/dom/workers/test/serviceworkers/update_worker.sjs b/dom/serviceworkers/test/update_worker.sjs
rename from dom/workers/test/serviceworkers/update_worker.sjs
rename to dom/serviceworkers/test/update_worker.sjs
diff --git a/dom/workers/test/serviceworkers/updatefoundevent.html b/dom/serviceworkers/test/updatefoundevent.html
rename from dom/workers/test/serviceworkers/updatefoundevent.html
rename to dom/serviceworkers/test/updatefoundevent.html
diff --git a/dom/workers/test/serviceworkers/utils.js b/dom/serviceworkers/test/utils.js
rename from dom/workers/test/serviceworkers/utils.js
rename to dom/serviceworkers/test/utils.js
diff --git a/dom/workers/test/serviceworkers/worker.js b/dom/serviceworkers/test/worker.js
rename from dom/workers/test/serviceworkers/worker.js
rename to dom/serviceworkers/test/worker.js
diff --git a/dom/workers/test/serviceworkers/worker2.js b/dom/serviceworkers/test/worker2.js
rename from dom/workers/test/serviceworkers/worker2.js
rename to dom/serviceworkers/test/worker2.js
diff --git a/dom/workers/test/serviceworkers/worker3.js b/dom/serviceworkers/test/worker3.js
rename from dom/workers/test/serviceworkers/worker3.js
rename to dom/serviceworkers/test/worker3.js
diff --git a/dom/workers/test/serviceworkers/workerUpdate/update.html b/dom/serviceworkers/test/workerUpdate/update.html
rename from dom/workers/test/serviceworkers/workerUpdate/update.html
rename to dom/serviceworkers/test/workerUpdate/update.html
diff --git a/dom/workers/test/serviceworkers/worker_unregister.js b/dom/serviceworkers/test/worker_unregister.js
rename from dom/workers/test/serviceworkers/worker_unregister.js
rename to dom/serviceworkers/test/worker_unregister.js
diff --git a/dom/workers/test/serviceworkers/worker_update.js b/dom/serviceworkers/test/worker_update.js
rename from dom/workers/test/serviceworkers/worker_update.js
rename to dom/serviceworkers/test/worker_update.js
diff --git a/dom/workers/test/serviceworkers/worker_updatefoundevent.js b/dom/serviceworkers/test/worker_updatefoundevent.js
rename from dom/workers/test/serviceworkers/worker_updatefoundevent.js
rename to dom/serviceworkers/test/worker_updatefoundevent.js
diff --git a/dom/workers/test/serviceworkers/worker_updatefoundevent2.js b/dom/serviceworkers/test/worker_updatefoundevent2.js
rename from dom/workers/test/serviceworkers/worker_updatefoundevent2.js
rename to dom/serviceworkers/test/worker_updatefoundevent2.js
diff --git a/dom/workers/test/serviceworkers/xslt/test.xml b/dom/serviceworkers/test/xslt/test.xml
rename from dom/workers/test/serviceworkers/xslt/test.xml
rename to dom/serviceworkers/test/xslt/test.xml
diff --git a/dom/workers/test/serviceworkers/xslt/xslt.sjs b/dom/serviceworkers/test/xslt/xslt.sjs
rename from dom/workers/test/serviceworkers/xslt/xslt.sjs
rename to dom/serviceworkers/test/xslt/xslt.sjs
diff --git a/dom/workers/test/serviceworkers/xslt_worker.js b/dom/serviceworkers/test/xslt_worker.js
rename from dom/workers/test/serviceworkers/xslt_worker.js
rename to dom/serviceworkers/test/xslt_worker.js
diff --git a/dom/workers/moz.build b/dom/workers/moz.build
--- a/dom/workers/moz.build
+++ b/dom/workers/moz.build
@@ -5,44 +5,31 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 with Files("**"):
     BUG_COMPONENT = ("Core", "DOM: Workers")
 
 # Public stuff.
 EXPORTS.mozilla.dom += [
     'FileReaderSync.h',
-    'ServiceWorkerCommon.h',
-    'ServiceWorkerContainer.h',
-    'ServiceWorkerDescriptor.h',
-    'ServiceWorkerEvents.h',
-    'ServiceWorkerInterceptController.h',
-    'ServiceWorkerIPCUtils.h',
-    'ServiceWorkerRegistrar.h',
-    'ServiceWorkerRegistration.h',
-    'ServiceWorkerUtils.h',
     'WorkerLocation.h',
     'WorkerNavigator.h',
     'WorkerPrivate.h',
     'WorkerRunnable.h',
     'WorkerScope.h',
 ]
 
 EXPORTS.mozilla.dom.workers += [
     'RuntimeService.h',
-    'ServiceWorkerInfo.h',
-    'ServiceWorkerManager.h',
-    'ServiceWorkerRegistrationInfo.h',
     'WorkerDebuggerManager.h',
     'Workers.h',
 ]
 
 # Stuff needed for the bindings, not really public though.
 EXPORTS.mozilla.dom.workers.bindings += [
-    'ServiceWorker.h',
     'SharedWorker.h',
     'WorkerHolder.h',
     'WorkerHolderToken.h',
 ]
 
 XPIDL_MODULE = 'dom_workers'
 
 XPIDL_SOURCES += [
@@ -52,89 +39,50 @@ XPIDL_SOURCES += [
 
 UNIFIED_SOURCES += [
     'ChromeWorkerScope.cpp',
     'FileReaderSync.cpp',
     'Principal.cpp',
     'RegisterBindings.cpp',
     'RuntimeService.cpp',
     'ScriptLoader.cpp',
-    'ServiceWorker.cpp',
-    'ServiceWorkerContainer.cpp',
-    'ServiceWorkerDescriptor.cpp',
-    'ServiceWorkerEvents.cpp',
-    'ServiceWorkerInfo.cpp',
-    'ServiceWorkerInterceptController.cpp',
-    'ServiceWorkerJob.cpp',
-    'ServiceWorkerJobQueue.cpp',
-    'ServiceWorkerManager.cpp',
-    'ServiceWorkerManagerChild.cpp',
-    'ServiceWorkerManagerParent.cpp',
-    'ServiceWorkerManagerService.cpp',
-    'ServiceWorkerPrivate.cpp',
-    'ServiceWorkerRegisterJob.cpp',
-    'ServiceWorkerRegistrar.cpp',
-    'ServiceWorkerRegistration.cpp',
-    'ServiceWorkerRegistrationInfo.cpp',
-    'ServiceWorkerScriptCache.cpp',
-    'ServiceWorkerUnregisterJob.cpp',
-    'ServiceWorkerUpdateJob.cpp',
-    'ServiceWorkerUpdaterChild.cpp',
-    'ServiceWorkerUpdaterParent.cpp',
-    'ServiceWorkerUtils.cpp',
     'SharedWorker.cpp',
     'WorkerDebuggerManager.cpp',
     'WorkerHolder.cpp',
     'WorkerHolderToken.cpp',
     'WorkerLocation.cpp',
     'WorkerNavigator.cpp',
     'WorkerPrivate.cpp',
     'WorkerRunnable.cpp',
     'WorkerScope.cpp',
     'WorkerThread.cpp',
 ]
 
-IPDL_SOURCES += [
-    'IPCServiceWorkerDescriptor.ipdlh',
-    'PServiceWorkerManager.ipdl',
-    'PServiceWorkerUpdater.ipdl',
-    'ServiceWorkerRegistrarTypes.ipdlh',
-]
-
 LOCAL_INCLUDES += [
     '../base',
     '../system',
     '/dom/base',
     '/dom/bindings',
     '/xpcom/build',
     '/xpcom/threads',
 ]
 
-include('/ipc/chromium/chromium-config.mozbuild')
-
 FINAL_LIBRARY = 'xul'
 
 TEST_DIRS += [
     'test/extensions/bootstrap',
     'test/extensions/traditional',
 ]
 
 MOCHITEST_MANIFESTS += [
     'test/mochitest.ini',
-    'test/serviceworkers/mochitest.ini',
 ]
 
 MOCHITEST_CHROME_MANIFESTS += [
     'test/chrome.ini',
-    'test/serviceworkers/chrome.ini'
-]
-
-BROWSER_CHROME_MANIFESTS += [
-    'test/serviceworkers/browser.ini',
-    'test/serviceworkers/isolated/multi-e10s-update/browser.ini',
 ]
 
 XPCSHELL_TESTS_MANIFESTS += ['test/xpcshell/xpcshell.ini']
 
 BROWSER_CHROME_MANIFESTS += ['test/browser.ini']
 
 TEST_DIRS += ['test/gtest']
 
