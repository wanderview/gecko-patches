# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  ea7a6643649e2cf934bae845ebad36290a4e0033

diff --git a/layout/reftests/bugs/703186-1-ref.html b/layout/reftests/bugs/703186-1-ref.html
--- a/layout/reftests/bugs/703186-1-ref.html
+++ b/layout/reftests/bugs/703186-1-ref.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html class="reftest-wait">
   <head>
     <script type="text/javascript">
       function init()
       {
         window.addEventListener("focus", function (e) {
-          setTimeout(finish, 0);
+          Promise.resolve().then(finish);
         }, true);
         document.getElementById("link").focus();
       }
 
       function finish()
       {
         document.documentElement.removeAttribute("class");
       }
diff --git a/layout/reftests/bugs/703186-1.html b/layout/reftests/bugs/703186-1.html
--- a/layout/reftests/bugs/703186-1.html
+++ b/layout/reftests/bugs/703186-1.html
@@ -1,17 +1,17 @@
 <!DOCTYPE html>
 <html class="reftest-wait">
   <head>
     <script type="text/javascript">
       function init()
       {
         window.addEventListener("focus", function (e) {
           e.stopPropagation();
-          setTimeout(finish, 0);
+          Promise.resolve().then(finish);
         }, true);
         document.getElementById("link").focus();
       }
 
       function finish()
       {
         document.documentElement.removeAttribute("class");
       }
diff --git a/layout/reftests/bugs/703186-2-ref.html b/layout/reftests/bugs/703186-2-ref.html
--- a/layout/reftests/bugs/703186-2-ref.html
+++ b/layout/reftests/bugs/703186-2-ref.html
@@ -1,24 +1,24 @@
 <!DOCTYPE html>
 <html class="reftest-wait">
   <head>
     <script type="text/javascript">
       function init()
       {
         window.addEventListener("focus", function (e) {
-          setTimeout(doTest, 0);
+          Promise.resolve().then(doTest);
         }, true);
         document.getElementById("link").focus();
       }
 
       function doTest()
       {
         window.addEventListener("blur", function (e) {
-          setTimeout(finish, 0);
+          Promise.resolve().then(finish);
         }, true);
         document.getElementById("link").blur();
       }
 
       function finish()
       {
         document.documentElement.removeAttribute("class");
       }
diff --git a/layout/reftests/bugs/703186-2.html b/layout/reftests/bugs/703186-2.html
--- a/layout/reftests/bugs/703186-2.html
+++ b/layout/reftests/bugs/703186-2.html
@@ -1,25 +1,25 @@
 <!DOCTYPE html>
 <html class="reftest-wait">
   <head>
     <script type="text/javascript">
       function init()
       {
         window.addEventListener("focus", function (e) {
-          setTimeout(doTest, 0);
+          Promise.resolve().then(doTest);
         }, true);
         document.getElementById("link").focus();
       }
 
       function doTest()
       {
         window.addEventListener("blur", function (e) {
           e.stopPropagation();
-          setTimeout(finish, 0);
+          Promise.resolve().then(finish);
         }, true);
         document.getElementById("link").blur();
       }
 
       function finish()
       {
         document.documentElement.removeAttribute("class");
       }
