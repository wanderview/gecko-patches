# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  aca81a5c7ad5c99403db11e5b1730ba5018ef8eb
Bug 1450271 Make MediaQueryList bind to its document's inner window. r=baku

diff --git a/layout/style/MediaQueryList.cpp b/layout/style/MediaQueryList.cpp
--- a/layout/style/MediaQueryList.cpp
+++ b/layout/style/MediaQueryList.cpp
@@ -18,17 +18,18 @@
 #define ONCHANGE_STRING NS_LITERAL_STRING("change")
 
 namespace mozilla {
 namespace dom {
 
 MediaQueryList::MediaQueryList(nsIDocument* aDocument,
                                const nsAString& aMediaQueryList,
                                CallerType aCallerType)
-  : mDocument(aDocument)
+  : DOMEventTargetHelper(aDocument->GetInnerWindow())
+  , mDocument(aDocument)
   , mMatches(false)
   , mMatchesValid(false)
 {
   mMediaList = MediaList::Create(aMediaQueryList, aCallerType);
 
   KeepAliveIfHasListenersFor(ONCHANGE_STRING);
 }
 
