# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  fcd35e10fa17d9fd11d92be48ae9698c2a900f1c
Bug 1246319 P3 Fix service worker registry value update. r=bz

diff --git a/dom/workers/ServiceWorkerRegistrar.cpp b/dom/workers/ServiceWorkerRegistrar.cpp
--- a/dom/workers/ServiceWorkerRegistrar.cpp
+++ b/dom/workers/ServiceWorkerRegistrar.cpp
@@ -177,16 +177,17 @@ ServiceWorkerRegistrar::RegisterServiceW
 
   {
     MonitorAutoLock lock(mMonitor);
     MOZ_ASSERT(mDataLoaded);
 
     bool found = false;
     for (uint32_t i = 0, len = mData.Length(); i < len; ++i) {
       if (Equivalent(aData, mData[i])) {
+        mData[i] = aData;
         found = true;
         break;
       }
     }
 
     if (!found) {
       mData.AppendElement(aData);
     }
