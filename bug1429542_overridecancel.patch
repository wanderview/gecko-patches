# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  5ae23fac2363f24b0fbdd4af653eb661693be694
Bug 1429542 Make HttpChannelChild::OverrideRunnable check for nullptr before using mNewChannel. r=asuth

diff --git a/netwerk/protocol/http/HttpChannelChild.cpp b/netwerk/protocol/http/HttpChannelChild.cpp
--- a/netwerk/protocol/http/HttpChannelChild.cpp
+++ b/netwerk/protocol/http/HttpChannelChild.cpp
@@ -1495,17 +1495,19 @@ HttpChannelChild::OverrideRunnable::Run(
   nsresult rv = NS_OK;
   Unused << mChannel->GetStatus(&rv);
   if (NS_FAILED(rv)) {
     if (mCallback) {
       mCallback->BodyComplete(rv);
       mCallback = nullptr;
     }
     mChannel->CleanupRedirectingChannel(rv);
-    mNewChannel->Cancel(rv);
+    if (mNewChannel) {
+      mNewChannel->Cancel(rv);
+    }
     return NS_OK;
   }
 
   bool ret = mChannel->Redirect3Complete(this);
 
   // If the method returns false, it means the IPDL connection is being
   // asyncly torn down and reopened, and OverrideWithSynthesizedResponse
   // will be called later from FinishInterceptedRedirect. This object will
