# HG changeset patch
# User Pierre Bertet <bonjour@pierrebertet.net>
# Parent  fe895421dfbe1f1f8f1fc6a39bb20774423a6d74
Bug 1224863 Make addon-sdk windows module include private browsing windows in browserWindows. r=bkelly

diff --git a/addon-sdk/source/lib/sdk/windows/firefox.js b/addon-sdk/source/lib/sdk/windows/firefox.js
--- a/addon-sdk/source/lib/sdk/windows/firefox.js
+++ b/addon-sdk/source/lib/sdk/windows/firefox.js
@@ -177,17 +177,17 @@ function windowEmit(window, event, ...ar
 
 function makeNewWindow(domWindow, browserHint = false) {
   if (browserHint || isBrowser(domWindow))
     return new BrowserWindow(domWindow);
   else
     return new Window(domWindow);
 }
 
-for (let domWindow of windows()) {
+for (let domWindow of windows(null, {includePrivate: supportPrivateWindows})) {
   let window = makeNewWindow(domWindow);
   if (window instanceof BrowserWindow)
     addListItem(browserWindows, window);
 }
 
 var windowEventListener = (event, domWindow, ...args) => {
   let toplevelWindow = getToplevelWindow(domWindow);
 
