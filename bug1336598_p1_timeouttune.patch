# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  7aa5e444af0ff686714d6165bd0e7e6d1abd0970
Bug 1336598 P1 Tune setTimeout anti-flood constants to minimize jank. r=smaug

diff --git a/dom/base/TimeoutManager.cpp b/dom/base/TimeoutManager.cpp
--- a/dom/base/TimeoutManager.cpp
+++ b/dom/base/TimeoutManager.cpp
@@ -68,22 +68,22 @@ namespace {
 // The number of queued runnables within the TabGroup ThrottledEventQueue
 // at which to begin applying back pressure to the window.
 const uint32_t kThrottledEventQueueBackPressure = 5000;
 
 // The amount of delay to apply to timers when back pressure is triggered.
 // As the length of the ThrottledEventQueue grows delay is increased.  The
 // delay is scaled such that every kThrottledEventQueueBackPressure runnables
 // in the queue equates to an additional kBackPressureDelayMS.
-const double kBackPressureDelayMS = 500;
+const double kBackPressureDelayMS = 250;
 
 // This defines a limit for how much the delay must drop before we actually
 // reduce back pressure throttle amount.  This makes the throttle delay
 // a bit "sticky" once we enter back pressure.
-const double kBackPressureDelayReductionThresholdMS = 400;
+const double kBackPressureDelayReductionThresholdMS = 1000;
 
 // The minimum delay we can reduce back pressure to before we just floor
 // the value back to zero.  This allows us to ensure that we can exit
 // back pressure event if there are always a small number of runnables
 // queued up.
 const double kBackPressureDelayMinimumMS = 100;
 
 // Convert a ThrottledEventQueue length to a timer delay in milliseconds.
