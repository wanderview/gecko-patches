# HG changeset patch
# Parent 9cafe345d6bfff06b52e68f5163afe3504ccf4ea
# User Ben Kelly <ben@wanderview.com>
Bug 1158263 Fix cache-add.https.html to expect InvalidStateError.


diff --git a/testing/web-platform/tests/service-workers/cache-storage/script-tests/cache-add.js b/testing/web-platform/tests/service-workers/cache-storage/script-tests/cache-add.js
--- a/testing/web-platform/tests/service-workers/cache-storage/script-tests/cache-add.js
+++ b/testing/web-platform/tests/service-workers/cache-storage/script-tests/cache-add.js
@@ -132,14 +132,14 @@ cache_test(function(cache) {
                         'success.');
         });
   }, 'Cache.addAll with a mix of succeeding and failing requests');
 
 cache_test(function(cache) {
     var request = new Request('../resources/simple.txt');
     return assert_promise_rejects(
       cache.addAll([request, request]),
-      new TypeError(),
-      'Cache.addAll should throw TypeError if the same request is added ' +
+      'InvalidStateError',
+      'Cache.addAll should throw InvalidStateError if the same request is added ' +
       'twice.');
   }, 'Cache.addAll called with the same Request object specified twice');
 
 done();
