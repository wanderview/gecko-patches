# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  4cc25e81f607be47d5178bbf9102dcebec6a046b

diff --git a/dom/workers/WorkerPrivate.cpp b/dom/workers/WorkerPrivate.cpp
--- a/dom/workers/WorkerPrivate.cpp
+++ b/dom/workers/WorkerPrivate.cpp
@@ -66,18 +66,18 @@
 #include "mozilla/dom/SimpleGlobalObject.h"
 #include "mozilla/dom/ScriptSettings.h"
 #include "mozilla/dom/StructuredCloneHolder.h"
 #include "mozilla/dom/TabChild.h"
 #include "mozilla/dom/WorkerBinding.h"
 #include "mozilla/dom/WorkerDebuggerGlobalScopeBinding.h"
 #include "mozilla/dom/WorkerGlobalScopeBinding.h"
 #include "mozilla/Preferences.h"
-#include "mozilla/SelfClosingTaskQueueTarget.h"
 #include "mozilla/TaskQueue.h"
+#include "mozilla/ThrottledEventQueue.h"
 #include "mozilla/TimelineConsumers.h"
 #include "mozilla/WorkerTimelineMarker.h"
 #include "nsAlgorithm.h"
 #include "nsContentUtils.h"
 #include "nsCycleCollector.h"
 #include "nsError.h"
 #include "nsDOMJSUtils.h"
 #include "nsHostObjectProtocolHandler.h"
@@ -3985,17 +3985,17 @@ WorkerPrivate::WorkerPrivate(WorkerPriva
   }
 
   nsCOMPtr<nsIEventTarget> target;
 
   if (aParent) {
     target = aParent->MainThreadEventTarget();
   } else {
     MOZ_ASSERT(NS_IsMainThread());
-    target = GetWindow() ? GetWindow()->GetTaskQueue() : nullptr;
+    target = GetWindow() ? GetWindow()->GetThrottledEventQueue() : nullptr;
   }
 
   if (!target) {
     nsCOMPtr<nsIThread> mainThread;
     NS_GetMainThread(getter_AddRefs(mainThread));
     MOZ_DIAGNOSTIC_ASSERT(mainThread);
     target = mainThread;
   }
