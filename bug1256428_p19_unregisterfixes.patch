# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  2815bba4328cb8fcaa47bff150835a54eefe840a
Bug 1256428 P19 Address ServiceWorkerUnregisterJob review feedback. r=jdm

diff --git a/dom/workers/ServiceWorkerUnregisterJob.cpp b/dom/workers/ServiceWorkerUnregisterJob.cpp
--- a/dom/workers/ServiceWorkerUnregisterJob.cpp
+++ b/dom/workers/ServiceWorkerUnregisterJob.cpp
@@ -21,30 +21,36 @@ ServiceWorkerUnregisterJob::ServiceWorke
 }
 
 bool
 ServiceWorkerUnregisterJob::GetResult() const
 {
   AssertIsOnMainThread();
   return mResult;
 }
+
 ServiceWorkerUnregisterJob::~ServiceWorkerUnregisterJob()
 {
 }
 
 void
 ServiceWorkerUnregisterJob::AsyncExecute()
 {
   AssertIsOnMainThread();
 
   if (Canceled()) {
     Finish(NS_ERROR_DOM_ABORT_ERR);
     return;
   }
 
+  // Step 1 of the Unregister algorithm requires checking that the
+  // client origin matches the scope's origin.  We perform this in
+  // registration->update() method directly since we don't have that
+  // client information available here.
+
   RefPtr<ServiceWorkerManager> swm = ServiceWorkerManager::GetInstance();
 
   // "Let registration be the result of running [[Get Registration]]
   // algorithm passing scope as the argument."
   RefPtr<ServiceWorkerRegistrationInfo> registration =
     swm->GetRegistration(mPrincipal, mScope);
   if (!registration) {
     // "If registration is null, then, resolve promise with false."
