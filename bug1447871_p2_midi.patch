# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  8eb0dd6e903683ad1d7dd1c30ff1602dd23172b9
Bug 1447871 P2 Make MIDIInput::Receive() check for nullptr GetOwner(). r=qdot

diff --git a/dom/midi/MIDIInput.cpp b/dom/midi/MIDIInput.cpp
--- a/dom/midi/MIDIInput.cpp
+++ b/dom/midi/MIDIInput.cpp
@@ -36,17 +36,17 @@ JSObject*
 MIDIInput::WrapObject(JSContext* aCx, JS::Handle<JSObject*> aGivenProto)
 {
   return MIDIInputBinding::Wrap(aCx, this, aGivenProto);
 }
 
 void
 MIDIInput::Receive(const nsTArray<MIDIMessage>& aMsgs)
 {
-  nsCOMPtr<nsIDocument> doc = GetOwner()->GetDoc();
+  nsCOMPtr<nsIDocument> doc = GetOwner() ? GetOwner()->GetDoc() : nullptr;
   if (!doc) {
     NS_WARNING("No document available to send MIDIMessageEvent to!");
     return;
   }
   for (auto& msg:aMsgs) {
     RefPtr<MIDIMessageEvent> event(
       MIDIMessageEvent::Constructor(this, msg.timestamp(), msg.data()));
     DispatchTrustedEvent(event);
