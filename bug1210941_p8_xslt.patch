# HG changeset patch
# User Ben Kelly <ben@wanderview.com>
# Parent  8a965986064871f926ea0f1045e44e0559885323
Bug 1210941 P8 Use LOAD_BYPASS_SERVICE_WORKER in xslt txURIUtils. r=ehsan

diff --git a/dom/xslt/base/txURIUtils.cpp b/dom/xslt/base/txURIUtils.cpp
--- a/dom/xslt/base/txURIUtils.cpp
+++ b/dom/xslt/base/txURIUtils.cpp
@@ -60,26 +60,23 @@ URIUtils::ResetWithSource(nsIDocument *a
     nsCOMPtr<nsIChannel> channel = sourceDoc->GetChannel();
     if (!channel) {
         // Need to synthesize one
         nsresult rv = NS_NewChannel(getter_AddRefs(channel),
                                     sourceDoc->GetDocumentURI(),
                                     sourceDoc,
                                     nsILoadInfo::SEC_FORCE_INHERIT_PRINCIPAL,
                                     nsIContentPolicy::TYPE_OTHER,
-                                    loadGroup);
+                                    loadGroup,
+                                    nullptr, // aCallbacks
+                                    nsIChannel::LOAD_BYPASS_SERVICE_WORKER);
 
         if (NS_FAILED(rv)) {
             return;
         }
-
-        nsCOMPtr<nsIHttpChannelInternal> internalChannel = do_QueryInterface(channel);
-        if (internalChannel) {
-            internalChannel->ForceNoIntercept();
-        }
     }
 
     aNewDoc->Reset(channel, loadGroup);
     aNewDoc->SetPrincipal(sourcePrincipal);
     aNewDoc->SetBaseURI(sourceDoc->GetDocBaseURI());
 
     // Copy charset
     aNewDoc->SetDocumentCharacterSetSource(
